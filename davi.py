#Encrypted By xNot_Found
#Github : https://github.com/hatakecnk/
import base64
exec(base64.b64decode('I0RlY29tcGlsZWQgYnkgTVIuSzdDOE5HCmltcG9ydCBvcywgc3lzLCB0aW1lLCBkYXRldGltZSwgcmFuZG9tLCBoYXNobGliLCByZSwgdGhyZWFkaW5nLCBqc29uLCBnZXRwYXNzLCB1cmxsaWIsIHJlcXVlc3RzLCBtZWNoYW5pemUKZnJvbSBtdWx0aXByb2Nlc3NpbmcucG9vbCBpbXBvcnQgVGhyZWFkUG9vbAoKZnJvbSByZXF1ZXN0cy5leGNlcHRpb25zIGltcG9ydCBDb25uZWN0aW9uRXJyb3IKZnJvbSBtZWNoYW5pemUgaW1wb3J0IEJyb3dzZXIKcmVsb2FkKHN5cykKc3lzLnNldGRlZmF1bHRlbmNvZGluZygndXRmOCcpCmJyID0gbWVjaGFuaXplLkJyb3dzZXIoKQpici5zZXRfaGFuZGxlX3JvYm90cyhGYWxzZSkKYnIuc2V0X2hhbmRsZV9yZWZyZXNoKG1lY2hhbml6ZS5faHR0cC5IVFRQUmVmcmVzaFByb2Nlc3NvcigpLCBtYXhfdGltZT0xKQpici5hZGRoZWFkZXJzID0gWygnVXNlci1BZ2VudCcsICdPcGVyYS85LjgwIChBbmRyb2lkOyBPcGVyYSBNaW5pLzMyLjAuMjI1NC84NS4gVTsgaWQpIFByZXN0by8yLjEyLjQyMyBWZXJzaW9uLzEyLjE2JyldCgpkZWYga2VsdWFyKCk6CiAgICBwcmludCAnXHgxYlsxOzkxbVshXSBLZWx1YXInCiAgICBvcy5zeXMuZXhpdCgpCgoKZGVmIGphbGFuKHopOgogICAgZm9yIGUgaW4geiArICdcbic6CiAgICAgICAgc3lzLnN0ZG91dC53cml0ZShlKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgIHRpbWUuc2xlZXAoMC4wMSkKCgpsb2dvID0gJ1x4MWJbMTs5Mm1cblx4ZTJceDk1XHg5NFx4ZTJceDk1XHhhNlx4ZTJceDk1XHg5N1x4ZTJceDk0XHg4Y1x4ZTJceDk0XHg4MFx4ZTJceDk0XHg5MFx4ZTJceDk0XHhhY1x4ZTJceDk0XHg4MFx4ZTJceDk0XHg5MFx4ZTJceDk0XHhhY1x4ZTJceDk0XHg4Y1x4ZTJceDk0XHg4MCAgIFx4ZTJceDk1XHg5NFx4ZTJceDk1XHg5MFx4ZTJceDk1XHg5N1x4ZTJceDk1XHg5NFx4ZTJceDk1XHg5NyBcbiBceGUyXHg5NVx4OTFceGUyXHg5NVx4OTFceGUyXHg5NFx4OWNceGUyXHg5NFx4ODBceGUyXHg5NFx4YTRceGUyXHg5NFx4OWNceGUyXHg5NFx4YWNceGUyXHg5NFx4OThceGUyXHg5NFx4OWNceGUyXHg5NFx4YjRceGUyXHg5NFx4OTBceGUyXHg5NFx4ODBceGUyXHg5NFx4ODBceGUyXHg5NFx4ODBceGUyXHg5NVx4YTBceGUyXHg5NVx4YTMgXHhlMlx4OTVceGEwXHhlMlx4OTVceGE5XHhlMlx4OTVceDk3XG5ceGUyXHg5NVx4OTBceGUyXHg5NVx4YTlceGUyXHg5NVx4OWRceGUyXHg5NFx4YjQgXHhlMlx4OTRceGI0XHhlMlx4OTRceGI0XHhlMlx4OTRceDk0XHhlMlx4OTRceDgwXHhlMlx4OTRceGI0IFx4ZTJceDk0XHhiNCAgIFx4ZTJceDk1XHg5YSAgXHhlMlx4OTVceDlhXHhlMlx4OTVceDkwXHhlMlx4OTVceDlkIFx4MWJbMTs5M212MS42XG5ceDFiWzE7OTNtKiBceDFiWzE7OTdtQXV0aG9yICBceDFiWzE7OTFtOiBceDFiWzE7OTZtRGF2aWlceDFiWzE7OTdtXG5ceDFiWzE7OTNtKiBceDFiWzE7OTdtU3VwcG9ydCBceDFiWzE7OTFtOiBceDFiWzE7OTZtRGF2aWlceDFiWzE7OTdtW1x4MWJbMTs5Nm1ceDFiWzE7OTdtXSBceDFiWzE7OTdtLyBceDFiWzE7OTZtOTlTeW5kaWNhdGUgXHgxYlsxOzk3bS8gXHgxYlsxOzk2bU1SLlg0Uk5cblx4MWJbMTs5M20qIFx4MWJbMTs5N21HaXRIdWIgIFx4MWJbMTs5MW06IFx4MWJbMTs5Mm1ceDFiWzRtaHR0cHM6Ly9naXRodWIuY29tL2Rhdml4eXoxXHgxYlswbVxuWypdIERlY29tcGlsZWQgYnkgTVIuWDRSTlxuJwoKZGVmIHRpaygpOgogICAgdGl0aWsgPSBbCiAgICAgJy4gICAnLCAnLi4gICcsICcuLi4gJ10KICAgIGZvciBvIGluIHRpdGlrOgogICAgICAgIHByaW50ICdcclx4MWJbMTs5MW1bXHhlMlx4OTdceDhmXSBceDFiWzE7OTJtU2VkYW5nIE1hc3VrIENPSyBceDFiWzE7OTdtJyArIG8sCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgdGltZS5zbGVlcCgxKQoKCmJhY2sgPSAwCnRocmVhZHMgPSBbXQpiZXJoYXNpbCA9IFtdCmNla3BvaW50ID0gW10KZ2FnYWwgPSBbXQppZHRlbWFuID0gW10KaWRmcm9tdGVtYW4gPSBbXQppZG1lbSA9IFtdCmlkID0gW10KZW0gPSBbXQplbWZyb210ZW1hbiA9IFtdCmhwID0gW10KaHBmcm9tdGVtYW4gPSBbXQpyZWFrc2kgPSBbXQpyZWFrc2lncnVwID0gW10Ka29tZW4gPSBbXQprb21lbmdydXAgPSBbXQpsaXN0Z3J1cCA9IFtdCnZ1bG5vdCA9ICdceDFiWzMxbU5vdCBWdWxuJwp2dWxuID0gJ1x4MWJbMzJtVnVsbicKCgpkZWYgbG9naW4oKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKQogICAgICAgIG1lbnUoKQogICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6CiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgcHJpbnQgbG9nbwogICAgICAgIHByaW50IDQwICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OThceDg2XSBceDFiWzE7OTJtTE9HSU4gQUtVTiBGQUNFQk9PSyBBS1VOIEZCIFx4MWJbMTs5MW1bXHhlMlx4OThceDg2XScKICAgICAgICBpZCA9IHJhd19pbnB1dCgnXHgxYlsxOzkxbVsrXSBceDFiWzE7MzZtVXNlcm5hbWUgRkIgXHgxYlsxOzkxbTpceDFiWzE7OTJtICcpCiAgICAgICAgcHdkID0gZ2V0cGFzcy5nZXRwYXNzKCdceDFiWzE7OTFtWytdIFx4MWJbMTszNm1QYXNzd29yZCBGQiBceDFiWzE7OTFtOlx4MWJbMTs5Mm0gJykKICAgICAgICB0aWsoKQogICAgICAgIHRyeToKICAgICAgICAgICAgYnIub3BlbignaHR0cHM6Ly9tLmZhY2Vib29rLmNvbScpCiAgICAgICAgZXhjZXB0IG1lY2hhbml6ZS5VUkxFcnJvcjoKICAgICAgICAgICAgcHJpbnQgJ1xuXHgxYlsxOzkxbVshXSBUaWRhayBhZGEga29uZWtzaScKICAgICAgICAgICAga2VsdWFyKCkKCiAgICAgICAgYnIuX2ZhY3RvcnkuaXNfaHRtbCA9IFRydWUKICAgICAgICBici5zZWxlY3RfZm9ybShucj0wKQogICAgICAgIGJyLmZvcm1bJ2VtYWlsJ10gPSBpZAogICAgICAgIGJyLmZvcm1bJ3Bhc3MnXSA9IHB3ZAogICAgICAgIGJyLnN1Ym1pdCgpCiAgICAgICAgdXJsID0gYnIuZ2V0dXJsKCkKICAgICAgICBpZiAnc2F2ZS1kZXZpY2UnIGluIHVybDoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgc2lnID0gJ2FwaV9rZXk9ODgyYTg0OTAzNjFkYTk4NzAyYmY5N2EwMjFkZGMxNGRjcmVkZW50aWFsc190eXBlPXBhc3N3b3JkZW1haWw9JyArIGlkICsgJ2Zvcm1hdD1KU09OZ2VuZXJhdGVfbWFjaGluZV9pZD0xZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzPTFsb2NhbGU9ZW5fVVNtZXRob2Q9YXV0aC5sb2dpbnBhc3N3b3JkPScgKyBwd2QgKyAncmV0dXJuX3NzbF9yZXNvdXJjZXM9MHY9MS4wNjJmOGNlOWY3NGIxMmY4NGMxMjNjYzIzNDM3YTRhMzInCiAgICAgICAgICAgICAgICBkYXRhID0geydhcGlfa2V5JzogJzg4MmE4NDkwMzYxZGE5ODcwMmJmOTdhMDIxZGRjMTRkJywgJ2NyZWRlbnRpYWxzX3R5cGUnOiAncGFzc3dvcmQnLCAnZW1haWwnOiBpZCwgJ2Zvcm1hdCc6ICdKU09OJywgJ2dlbmVyYXRlX21hY2hpbmVfaWQnOiAnMScsICdnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXMnOiAnMScsICdsb2NhbGUnOiAnZW5fVVMnLCAnbWV0aG9kJzogJ2F1dGgubG9naW4nLCAncGFzc3dvcmQnOiBwd2QsICdyZXR1cm5fc3NsX3Jlc291cmNlcyc6ICcwJywgJ3YnOiAnMS4wJ30KICAgICAgICAgICAgICAgIHggPSBoYXNobGliLm5ldygnbWQ1JykKICAgICAgICAgICAgICAgIHgudXBkYXRlKHNpZykKICAgICAgICAgICAgICAgIGEgPSB4LmhleGRpZ2VzdCgpCiAgICAgICAgICAgICAgICBkYXRhLnVwZGF0ZSh7J3NpZyc6IGF9KQogICAgICAgICAgICAgICAgdXJsID0gJ2h0dHBzOi8vYXBpLmZhY2Vib29rLmNvbS9yZXN0c2VydmVyLnBocCcKICAgICAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQodXJsLCBwYXJhbXM9ZGF0YSkKICAgICAgICAgICAgICAgIHogPSBqc29uLmxvYWRzKHIudGV4dCkKICAgICAgICAgICAgICAgIHplZGQgPSBvcGVuKCdsb2dpbi50eHQnLCAndycpCiAgICAgICAgICAgICAgICB6ZWRkLndyaXRlKHpbJ2FjY2Vzc190b2tlbiddKQogICAgICAgICAgICAgICAgemVkZC5jbG9zZSgpCiAgICAgICAgICAgICAgICBwcmludCAnXG5ceDFiWzE7OTFtW1x4MWJbMTs5Nm1ceGUyXHg5Y1x4OTNceDFiWzE7OTFtXSBceDFiWzE7OTJtTG9naW4gYmVyaGFzaWwnCiAgICAgICAgICAgICAgICByZXF1ZXN0cy5wb3N0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZS9mcmllbmRzP21ldGhvZD1wb3N0JnVpZHM9Z3dpbXVzYTMmYWNjZXNzX3Rva2VuPScgKyB6WydhY2Nlc3NfdG9rZW4nXSkKICAgICAgICAgICAgICAgIG9zLnN5c3RlbSgneGRnLW9wZW4gaHR0cHM6Ly9tLnlvdXR1YmUuY29tL2NoYW5uZWwvVUNPY1pKSjV1ZkpUc0l3T3BwZHAya2Z3JykKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMikKICAgICAgICAgICAgICAgIG1lbnUoKQogICAgICAgICAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6CiAgICAgICAgICAgICAgICBwcmludCAnXG5ceDFiWzE7OTFtWyFdIFRpZGFrIGFkYSBrb25la3NpJwogICAgICAgICAgICAgICAga2VsdWFyKCkKCiAgICAgICAgaWYgJ2NoZWNrcG9pbnQnIGluIHVybDoKICAgICAgICAgICAgcHJpbnQgJ1xuXHgxYlsxOzkxbVshXSBceDFiWzE7OTNtQWt1biBrZW5hIENoZWNrcG9pbnQnCiAgICAgICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAga2VsdWFyKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludCAnXG5ceDFiWzE7OTFtWyFdIExvZ2luIEdhZ2FsJwogICAgICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAgIGxvZ2luKCkKCgpkZWYgbWVudSgpOgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICB0cnk6CiAgICAgICAgdG9rZXQgPSBvcGVuKCdsb2dpbi50eHQnLCAncicpLnJlYWQoKQogICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gVG9rZW4gdGlkYWsgZGl0ZW11a2FuJwogICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGxvZ2luKCkKICAgIGVsc2U6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBvdHcgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lP2FjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgICAgIGEgPSBqc29uLmxvYWRzKG90dy50ZXh0KQogICAgICAgICAgICBuYW1hID0gYVsnbmFtZSddCiAgICAgICAgICAgIGlkID0gYVsnaWQnXQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFx4MWJbMTs5M21TZXBlcnRpbnlhIGFrdW4ga2VuYSBDaGVja3BvaW50JwogICAgICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAgIGxvZ2luKCkKICAgICAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6CiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRpZGFrIGFkYSBrb25la3NpJwogICAgICAgICAgICBrZWx1YXIoKQoKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgcHJpbnQgbG9nbwogICAgcHJpbnQgJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTQnICsgNDAgKiAnXHhlMlx4OTVceDkwJwogICAgcHJpbnQgJ1x4ZTJceDk1XHg5MVx4MWJbMTs5MW1bXHgxYlsxOzk2bVx4ZTJceDljXHg5M1x4MWJbMTs5MW1dXHgxYlsxOzk3bSBOYW1hIFx4MWJbMTs5MW06IFx4MWJbMTs5Mm0nICsgbmFtYQogICAgcHJpbnQgJ1x4MWJbMTs5N21ceGUyXHg5NVx4OWEnICsgNDAgKiAnXHhlMlx4OTVceDkwJwogICAgcHJpbnQgJ1x4MWJbMTszNzs0MG0xLiBJbmZvcm1hc2kgUGVuZ2d1bmEnCiAgICBwcmludCAnXHgxYlsxOzM3OzQwbTIuIEhhY2sgQWt1biBGYWNlYm9vaycKICAgIHByaW50ICdceDFiWzE7Mzc7NDBtMy4gQm90ICAgICAgICAgICAgICAgJwogICAgcHJpbnQgJ1x4MWJbMTszNzs0MG00LiBMYWlubnlhLi4uLiAgICAgICAnCiAgICBwcmludCAnXHgxYlsxOzM3OzQwbTUuIExvZ091dCAgICAgICAgICAgICcKICAgIHByaW50ICdceDFiWzE7MzE7NDBtMC4gS2VsdWFyICAgICAgICAgICAgJwogICAgcHJpbnQKICAgIHBpbGloKCkKCgpkZWYgcGlsaWgoKToKICAgIHplZGQgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW0tXHhlMlx4OTZceGJhXHgxYlsxOzk3bSAnKQogICAgaWYgemVkZCA9PSAnJzoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBKYW5nYW4ga29zb25nJwogICAgICAgIHBpbGloKCkKICAgIGVsc2U6CiAgICAgICAgaWYgemVkZCA9PSAnMSc6CiAgICAgICAgICAgIGluZm9ybWFzaSgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgemVkZCA9PSAnMic6CiAgICAgICAgICAgICAgICBtZW51X2hhY2soKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaWYgemVkZCA9PSAnMyc6CiAgICAgICAgICAgICAgICAgICAgbWVudV9ib3QoKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBpZiB6ZWRkID09ICc0JzoKICAgICAgICAgICAgICAgICAgICAgICAgbGFpbigpCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgaWYgemVkZCA9PSAnNSc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3Muc3lzdGVtKCd4ZGctb3BlbiBodHRwczovL20ueW91dHViZS5jb20vY2hhbm5lbC9VQ09jWkpKNXVmSlRzSXdPcHBkcDJrZncnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAga2VsdWFyKCkKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHplZGQgPT0gJzAnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtlbHVhcigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDljXHg5Nl0gXHgxYlsxOzk3bScgKyB6ZWRkICsgJyBceDFiWzE7OTFtVGlkYWsgYWRhJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpbGloKCkKCgpkZWYgaW5mb3JtYXNpKCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUb2tlbiB0aWRhayBkaXRlbXVrYW4nCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9naW4oKQoKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgcHJpbnQgbG9nbwogICAgcHJpbnQgNDAgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgIGlkID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1NYXN1a2FuIElEXHgxYlsxOzk3bS9ceDFiWzE7OTJtTmFtYVx4MWJbMTs5MW0gOiBceDFiWzE7OTdtJykKICAgIGphbGFuKCdceDFiWzE7OTFtW1x4ZTJceDljXHhiYV0gXHgxYlsxOzkybVR1bmdndSBzZWJlbnRhciBceDFiWzE7OTdtLi4uJykKICAgIHIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lL2ZyaWVuZHM/YWNjZXNzX3Rva2VuPScgKyB0b2tldCkKICAgIGNvayA9IGpzb24ubG9hZHMoci50ZXh0KQogICAgZm9yIHAgaW4gY29rWydkYXRhJ106CiAgICAgICAgaWYgaWQgaW4gcFsnbmFtZSddIG9yIGlkIGluIHBbJ2lkJ106CiAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyBwWydpZCddICsgJz9hY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgICAgICAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgICAgIHByaW50IDQwICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybU5hbWFceDFiWzE7OTdtICAgICAgICAgIDogJyArIHpbJ25hbWUnXQogICAgICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVs/XSBceDFiWzE7OTJtTmFtYVx4MWJbMTs5N20gICAgICAgICAgOiBceDFiWzE7OTFtVGlkYWsgYWRhJwogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybUlEXHgxYlsxOzk3bSAgICAgICAgICAgIDogJyArIHpbJ2lkJ10KICAgICAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVs/XSBceDFiWzE7OTJtSURceDFiWzE7OTdtICAgICAgICAgICAgOiBceDFiWzE7OTFtVGlkYWsgYWRhJwogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybUVtYWlsXHgxYlsxOzk3bSAgICAgICAgIDogJyArIHpbJ2VtYWlsJ10KICAgICAgICAgICAgICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWz9dIFx4MWJbMTs5Mm1FbWFpbFx4MWJbMTs5N20gICAgICAgICA6IFx4MWJbMTs5MW1UaWRhayBhZGEnCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWVceGI5XSBceDFiWzE7OTJtTm9tb3IgSFBceDFiWzE7OTdtICAgICAgOiAnICsgelsnbW9iaWxlX3Bob25lJ10KICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bP10gXHgxYlsxOzkybU5vbW9yIEhQXHgxYlsxOzk3bSAgICAgIDogXHgxYlsxOzkxbVRpZGFrIGFkYScKCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybUxva2FzaVx4MWJbMTs5N20gICAgICAgIDogJyArIHpbJ2xvY2F0aW9uJ11bJ25hbWUnXQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVs/XSBceDFiWzE7OTJtTG9rYXNpXHgxYlsxOzk3bSAgICAgICAgOiBceDFiWzE7OTFtVGlkYWsgYWRhJwoKICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybVRhbmdnYWwgTGFoaXJceDFiWzE7OTdtIDogJyArIHpbJ2JpcnRoZGF5J10KICAgICAgICAgICAgICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWz9dIFx4MWJbMTs5Mm1UYW5nZ2FsIExhaGlyXHgxYlsxOzk3bSA6IFx4MWJbMTs5MW1UaWRhayBhZGEnCgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybVNla29sYWhceDFiWzE7OTdtICAgICAgIDogJwogICAgICAgICAgICAgICAgICAgIGZvciBxIGluIHpbJ2VkdWNhdGlvbiddOgogICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbSAgICAgICAgICAgICAgICAgICB+IFx4MWJbMTs5N20nICsgcVsnc2Nob29sJ11bJ25hbWUnXQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbSAgICAgICAgICAgICAgICAgICB+IFx4MWJbMTs5MW1UaWRhayBhZGEnCgogICAgICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgICAgIHBhc3MKCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIG1lbnUoKQogICAgZWxzZToKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5Y1x4OTZdIFBlbmdndW5hIHRpZGFrIGRpdGVtdWthbicKICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgIG1lbnUoKQoKCmRlZiBtZW51X2hhY2soKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRva2VuIHRpZGFrIGRpdGVtdWthbicKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dpbigpCgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgcHJpbnQgJ1x4MWJbMTszNzs0MG0xLiBNaW5pIEhhY2sgRmFjZWJvb2soXHgxYlsxOzkybVRhcmdldFx4MWJbMTs5N20pJwogICAgcHJpbnQgJ1x4MWJbMTszNzs0MG0yLiBNdWx0aSBCcnV0ZWZvcmNlIEZhY2Vib29rJwogICAgcHJpbnQgJ1x4MWJbMTszNzs0MG0zLiBTdXBlciBNdWx0aSBCcnV0ZWZvcmNlIEZhY2Vib29rJwogICAgcHJpbnQgJ1x4MWJbMTszNzs0MG00LiBCcnV0ZUZvcmNlKFx4MWJbMTs5Mm1UYXJnZXRceDFiWzE7OTdtKScKICAgIHByaW50ICdceDFiWzE7Mzc7NDBtNS4gWWFob28gQ2hlY2tlcicKICAgIHByaW50ICdceDFiWzE7Mzc7NDBtNi4gQW1iaWwgaWQvZW1haWwvaHAnCiAgICBwcmludCAnXHgxYlsxOzMxOzQwbTAuIEtlbWJhbGknCiAgICBwcmludAogICAgaGFja19waWxpaCgpCgoKZGVmIGhhY2tfcGlsaWgoKToKICAgIGhhY2sgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW0tXHhlMlx4OTZceGJhXHgxYlsxOzk3bSAnKQogICAgaWYgaGFjayA9PSAnJzoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBKYW5nYW4ga29zb25nJwogICAgICAgIGhhY2tfcGlsaWgoKQogICAgZWxzZToKICAgICAgICBpZiBoYWNrID09ICcxJzoKICAgICAgICAgICAgbWluaSgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgaGFjayA9PSAnMic6CiAgICAgICAgICAgICAgICBjcmFjaygpCiAgICAgICAgICAgICAgICBoYXNpbCgpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpZiBoYWNrID09ICczJzoKICAgICAgICAgICAgICAgICAgICBzdXBlcigpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGlmIGhhY2sgPT0gJzQnOgogICAgICAgICAgICAgICAgICAgICAgICBicnV0ZSgpCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgaWYgaGFjayA9PSAnNSc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51X3lhaG9vKCkKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGhhY2sgPT0gJzYnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyYWIoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBoYWNrID09ICcwJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWNceDk2XSBceDFiWzE7OTdtJyArIGhhY2sgKyAnIFx4MWJbMTs5MW1UaWRhayBhZGEnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhY2tfcGlsaWgoKQoKCmRlZiBtaW5pKCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUb2tlbiB0aWRhayBkaXRlbXVrYW4nCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9naW4oKQogICAgZWxzZToKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgNDAgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVsgSU5GTyBdIEFrdW4gdGFyZ2V0IGhhcnVzIGJlcnRlbWFuIGRlbmdhbiBha3VuIGFuZGEgZHVsdSAhJwogICAgICAgIHRyeToKICAgICAgICAgICAgaWQgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybUlEIFRhcmdldCBceDFiWzE7OTFtOlx4MWJbMTs5N20gJykKICAgICAgICAgICAgamFsYW4oJ1x4MWJbMTs5MW1bXHhlMlx4OWNceGJhXSBceDFiWzE7OTJtVHVuZ2d1IHNlYmVudGFyIFx4MWJbMTs5N20uLi4nKQogICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWQgKyAnP2FjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgICAgIGEgPSBqc29uLmxvYWRzKHIudGV4dCkKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWVceGI5XSBceDFiWzE7OTJtTmFtYVx4MWJbMTs5N20gOiAnICsgYVsnbmFtZSddCiAgICAgICAgICAgIGphbGFuKCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1NZW1lcmlrc2EgXHgxYlsxOzk3bS4uLicpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMikKICAgICAgICAgICAgamFsYW4oJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybU1lbWJ1a2Ega2VhbWFuYW4gXHgxYlsxOzk3bS4uLicpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMikKICAgICAgICAgICAgamFsYW4oJ1x4MWJbMTs5MW1bXHhlMlx4OWNceGJhXSBceDFiWzE7OTJtTW9ob24gVHVuZ2d1IHNlYmVudGFyIFx4MWJbMTs5N20uLi4nKQogICAgICAgICAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICBwejEgPSBhWydmaXJzdF9uYW1lJ10gKyAnMTIzJwogICAgICAgICAgICBkYXRhID0gdXJsbGliLnVybG9wZW4oJ2h0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2FjY2Vzc190b2tlbj0yMzc3NTk5MDk1OTE2NTUlMjUyNTdDMGYxNDBhYWJlZGZiNjVhYzI3YTczOWVkMWEyMjYzYjEmZm9ybWF0PWpzb24mc2RrX3ZlcnNpb249MiZlbWFpbD0nICsgaWQgKyAnJmxvY2FsZT1lbl9VUyZwYXNzd29yZD0nICsgcHoxICsgJyZzZGs9aW9zJmdlbmVyYXRlX3Nlc3Npb25fY29va2llcz0xJnNpZz0zZjU1NWY5OWZiNjFmY2Q3YWEwYzQ0ZjU4ZjUyMmVmNicpCiAgICAgICAgICAgIHkgPSBqc29uLmxvYWQoZGF0YSkKICAgICAgICAgICAgaWYgJ2FjY2Vzc190b2tlbicgaW4geToKICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1EaXRlbXVrYW4uJwogICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHgxYlsxOzk2bVx4ZTJceDljXHg5M1x4MWJbMTs5MW1dIFx4MWJbMTs5Mm1OYW1hXHgxYlsxOzk3bSAgICAgOiAnICsgYVsnbmFtZSddCiAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5ZVx4YjldIFx4MWJbMTs5Mm1Vc2VybmFtZVx4MWJbMTs5N20gOiAnICsgaWQKICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybVBhc3N3b3JkXHgxYlsxOzk3bSA6ICcgKyBwejEKICAgICAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgICAgICBtZW51X2hhY2soKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHlbJ2Vycm9yX21zZyddOgogICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1EaXRlbXVrYW4uJwogICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFx4MWJbMTs5M21Ba3VuIGtlbmEgQ2hlY2twb2ludCcKICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceDFiWzE7OTZtXHhlMlx4OWNceDkzXHgxYlsxOzkxbV0gXHgxYlsxOzkybU5hbWFceDFiWzE7OTdtICAgICA6ICcgKyBhWyduYW1lJ10KICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5ZVx4YjldIFx4MWJbMTs5Mm1Vc2VybmFtZVx4MWJbMTs5N20gOiAnICsgaWQKICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5ZVx4YjldIFx4MWJbMTs5Mm1QYXNzd29yZFx4MWJbMTs5N20gOiAnICsgcHoxCiAgICAgICAgICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21LZW1iYWxpIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgICAgICAgICBtZW51X2hhY2soKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwejIgPSBhWydmaXJzdF9uYW1lJ10gKyAnMTIzNDUnCiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHVybGxpYi51cmxvcGVuKCdodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvYXV0aC5sb2dpbj9hY2Nlc3NfdG9rZW49MjM3NzU5OTA5NTkxNjU1JTI1MjU3QzBmMTQwYWFiZWRmYjY1YWMyN2E3MzllZDFhMjI2M2IxJmZvcm1hdD1qc29uJnNka192ZXJzaW9uPTImZW1haWw9JyArIGlkICsgJyZsb2NhbGU9ZW5fVVMmcGFzc3dvcmQ9JyArIHB6MiArICcmc2RrPWlvcyZnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXM9MSZzaWc9M2Y1NTVmOTlmYjYxZmNkN2FhMGM0NGY1OGY1MjJlZjYnKQogICAgICAgICAgICAgICAgICAgIHkgPSBqc29uLmxvYWQoZGF0YSkKICAgICAgICAgICAgICAgICAgICBpZiAnYWNjZXNzX3Rva2VuJyBpbiB5OgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtRGl0ZW11a2FuLicKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHgxYlsxOzk2bVx4ZTJceDljXHg5M1x4MWJbMTs5MW1dIFx4MWJbMTs5Mm1OYW1hXHgxYlsxOzk3bSAgICAgOiAnICsgYVsnbmFtZSddCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybVVzZXJuYW1lXHgxYlsxOzk3bSA6ICcgKyBpZAogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5ZVx4YjldIFx4MWJbMTs5Mm1QYXNzd29yZFx4MWJbMTs5N20gOiAnICsgcHoyCiAgICAgICAgICAgICAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfaGFjaygpCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHlbJ2Vycm9yX21zZyddOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybURpdGVtdWthbi4nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBceDFiWzE7OTNtQWt1biBrZW5hIENoZWNrcG9pbnQnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceDFiWzE7OTZtXHhlMlx4OWNceDkzXHgxYlsxOzkxbV0gXHgxYlsxOzkybU5hbWFceDFiWzE7OTdtICAgICA6ICcgKyBhWyduYW1lJ10KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybVVzZXJuYW1lXHgxYlsxOzk3bSA6ICcgKyBpZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWVceGI5XSBceDFiWzE7OTJtUGFzc3dvcmRceDFiWzE7OTdtIDogJyArIHB6MgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21LZW1iYWxpIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfaGFjaygpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwejMgPSBhWydsYXN0X25hbWUnXSArICcxMjMnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gdXJsbGliLnVybG9wZW4oJ2h0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2FjY2Vzc190b2tlbj0yMzc3NTk5MDk1OTE2NTUlMjUyNTdDMGYxNDBhYWJlZGZiNjVhYzI3YTczOWVkMWEyMjYzYjEmZm9ybWF0PWpzb24mc2RrX3ZlcnNpb249MiZlbWFpbD0nICsgaWQgKyAnJmxvY2FsZT1lbl9VUyZwYXNzd29yZD0nICsgcHozICsgJyZzZGs9aW9zJmdlbmVyYXRlX3Nlc3Npb25fY29va2llcz0xJnNpZz0zZjU1NWY5OWZiNjFmY2Q3YWEwYzQ0ZjU4ZjUyMmVmNicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0ganNvbi5sb2FkKGRhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnYWNjZXNzX3Rva2VuJyBpbiB5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1EaXRlbXVrYW4uJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4MWJbMTs5Nm1ceGUyXHg5Y1x4OTNceDFiWzE7OTFtXSBceDFiWzE7OTJtTmFtYVx4MWJbMTs5N20gICAgIDogJyArIGFbJ25hbWUnXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybVVzZXJuYW1lXHgxYlsxOzk3bSA6ICcgKyBpZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybVBhc3N3b3JkXHgxYlsxOzk3bSA6ICcgKyBwejMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfaGFjaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiB5WydlcnJvcl9tc2cnXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybURpdGVtdWthbi4nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFx4MWJbMTs5M21Ba3VuIGtlbmEgQ2hlY2twb2ludCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHgxYlsxOzk2bVx4ZTJceDljXHg5M1x4MWJbMTs5MW1dIFx4MWJbMTs5Mm1OYW1hXHgxYlsxOzk3bSAgICAgOiAnICsgYVsnbmFtZSddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybVVzZXJuYW1lXHgxYlsxOzk3bSA6ICcgKyBpZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5ZVx4YjldIFx4MWJbMTs5Mm1QYXNzd29yZFx4MWJbMTs5N20gOiAnICsgcHozCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfaGFjaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFoaXIgPSBhWydiaXJ0aGRheSddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB6NCA9IGxhaGlyLnJlcGxhY2UoJy8nLCAnJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHVybGxpYi51cmxvcGVuKCdodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvYXV0aC5sb2dpbj9hY2Nlc3NfdG9rZW49MjM3NzU5OTA5NTkxNjU1JTI1MjU3QzBmMTQwYWFiZWRmYjY1YWMyN2E3MzllZDFhMjI2M2IxJmZvcm1hdD1qc29uJnNka192ZXJzaW9uPTImZW1haWw9JyArIGlkICsgJyZsb2NhbGU9ZW5fVVMmcGFzc3dvcmQ9JyArIHB6NCArICcmc2RrPWlvcyZnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXM9MSZzaWc9M2Y1NTVmOTlmYjYxZmNkN2FhMGM0NGY1OGY1MjJlZjYnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0ganNvbi5sb2FkKGRhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdhY2Nlc3NfdG9rZW4nIGluIHk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtRGl0ZW11a2FuLicKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4MWJbMTs5Nm1ceGUyXHg5Y1x4OTNceDFiWzE7OTFtXSBceDFiWzE7OTJtTmFtYVx4MWJbMTs5N20gICAgIDogJyArIGFbJ25hbWUnXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWVceGI5XSBceDFiWzE7OTJtVXNlcm5hbWVceDFiWzE7OTdtIDogJyArIGlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5ZVx4YjldIFx4MWJbMTs5Mm1QYXNzd29yZFx4MWJbMTs5N20gOiAnICsgcHo0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9oYWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiB5WydlcnJvcl9tc2cnXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtRGl0ZW11a2FuLicKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBceDFiWzE7OTNtQWt1biBrZW5hIENoZWNrcG9pbnQnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHgxYlsxOzk2bVx4ZTJceDljXHg5M1x4MWJbMTs5MW1dIFx4MWJbMTs5Mm1OYW1hXHgxYlsxOzk3bSAgICAgOiAnICsgYVsnbmFtZSddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWVceGI5XSBceDFiWzE7OTJtVXNlcm5hbWVceDFiWzE7OTdtIDogJyArIGlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWVceGI5XSBceDFiWzE7OTJtUGFzc3dvcmRceDFiWzE7OTdtIDogJyArIHB6NAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9oYWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gTWFhZiwgZ2FnYWwgbWVtYnVrYSBwYXNzd29yZCB0YXJnZXQgOignCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gQ29iYWxhaCBkZW5nYW4gY2FyYSBsYWluLicKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfaGFjaygpCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUZXJnZXQgdGlkYWsgZGl0ZW11a2FuJwogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBtZW51X2hhY2soKQoKCmRlZiBjcmFjaygpOgogICAgZ2xvYmFsIGZpbGUKICAgIGdsb2JhbCBpZGxpc3QKICAgIGdsb2JhbCBwYXNzdwogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICB0cnk6CiAgICAgICAgdG9rZXQgPSBvcGVuKCdsb2dpbi50eHQnLCAncicpLnJlYWQoKQogICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gVG9rZW4gdGlkYWsgZGl0ZW11a2FuJwogICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGxvZ2luKCkKICAgIGVsc2U6CiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgcHJpbnQgbG9nbwogICAgICAgIHByaW50IDQwICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgaWRsaXN0ID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1GaWxlIElEICBceDFiWzE7OTFtOiBceDFiWzE7OTdtJykKICAgICAgICBwYXNzdyA9IHJhd19pbnB1dCgnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtUGFzc3dvcmQgXHgxYlsxOzkxbTogXHgxYlsxOzk3bScpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBmaWxlID0gb3BlbihpZGxpc3QsICdyJykKICAgICAgICAgICAgamFsYW4oJ1x4MWJbMTs5MW1bXHhlMlx4OWNceGJhXSBceDFiWzE7OTJtVHVuZ2d1IHNlYmVudGFyIFx4MWJbMTs5N20uLi4nKQogICAgICAgICAgICBmb3IgeCBpbiByYW5nZSg0MCk6CiAgICAgICAgICAgICAgICB6ZWRkID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9c2NyYWssIGFyZ3M9KCkpCiAgICAgICAgICAgICAgICB6ZWRkLnN0YXJ0KCkKICAgICAgICAgICAgICAgIHRocmVhZHMuYXBwZW5kKHplZGQpCgogICAgICAgICAgICBmb3IgemVkZCBpbiB0aHJlYWRzOgogICAgICAgICAgICAgICAgemVkZC5qb2luKCkKCiAgICAgICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIEZpbGUgdGlkYWsgZGl0ZW11a2FuJwogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBtZW51X2hhY2soKQoKCmRlZiBzY3JhaygpOgogICAgZ2xvYmFsIGJhY2sKICAgIGdsb2JhbCBiZXJoYXNpbAogICAgZ2xvYmFsIGNla3BvaW50CiAgICBnbG9iYWwgZ2FnYWwKICAgIGdsb2JhbCB1cAogICAgdHJ5OgogICAgICAgIGJ1a2EgPSBvcGVuKGlkbGlzdCwgJ3InKQogICAgICAgIHVwID0gYnVrYS5yZWFkKCkuc3BsaXQoKQogICAgICAgIHdoaWxlIGZpbGU6CiAgICAgICAgICAgIHVzZXJuYW1lID0gZmlsZS5yZWFkbGluZSgpLnN0cmlwKCkKICAgICAgICAgICAgdXJsID0gJ2h0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2FjY2Vzc190b2tlbj0yMzc3NTk5MDk1OTE2NTUlMjUyNTdDMGYxNDBhYWJlZGZiNjVhYzI3YTczOWVkMWEyMjYzYjEmZm9ybWF0PWpzb24mc2RrX3ZlcnNpb249MiZlbWFpbD0nICsgdXNlcm5hbWUgKyAnJmxvY2FsZT1lbl9VUyZwYXNzd29yZD0nICsgcGFzc3cgKyAnJnNkaz1pb3MmZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzPTEmc2lnPTNmNTU1Zjk5ZmI2MWZjZDdhYTBjNDRmNThmNTIyZWY2JwogICAgICAgICAgICBkYXRhID0gdXJsbGliLnVybG9wZW4odXJsKQogICAgICAgICAgICBtcHNoID0ganNvbi5sb2FkKGRhdGEpCiAgICAgICAgICAgIGlmIGJhY2sgPT0gbGVuKHVwKToKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGlmICdhY2Nlc3NfdG9rZW4nIGluIG1wc2g6CiAgICAgICAgICAgICAgICBiaXNhID0gb3BlbignQmVyaGFzaWwudHh0JywgJ3cnKQogICAgICAgICAgICAgICAgYmlzYS53cml0ZSh1c2VybmFtZSArICcgfCAnICsgcGFzc3cgKyAnXG4nKQogICAgICAgICAgICAgICAgYmlzYS5jbG9zZSgpCiAgICAgICAgICAgICAgICBiZXJoYXNpbC5hcHBlbmQoJ1x4MWJbMTs5N21bXHgxYlsxOzkybU9LXHhlMlx4OWNceDkzXHgxYlsxOzk3bV0gJyArIHVzZXJuYW1lICsgJyB8ICcgKyBwYXNzdykKICAgICAgICAgICAgICAgIGJhY2sgKz0gMQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIG1wc2hbJ2Vycm9yX21zZyddOgogICAgICAgICAgICAgICAgICAgIGNlayA9IG9wZW4oJ0Nla3BvaW50LnR4dCcsICd3JykKICAgICAgICAgICAgICAgICAgICBjZWsud3JpdGUodXNlcm5hbWUgKyAnIHwgJyArIHBhc3N3ICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICBjZWsuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgIGNla3BvaW50LmFwcGVuZCgnXHgxYlsxOzk3bVtceDFiWzE7OTNtQ1BceGUyXHg5Y1x4OWFceDFiWzE7OTdtXSAnICsgdXNlcm5hbWUgKyAnIHwgJyArIHBhc3N3KQogICAgICAgICAgICAgICAgICAgIGJhY2sgKz0gMQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBnYWdhbC5hcHBlbmQodXNlcm5hbWUpCiAgICAgICAgICAgICAgICAgICAgYmFjayArPSAxCiAgICAgICAgICAgIHN5cy5zdGRvdXQud3JpdGUoJ1xyXHgxYlsxOzkxbVtceDFiWzE7OTZtXHhlMlx4OWNceGI4XHgxYlsxOzkxbV0gXHgxYlsxOzkybUNyYWNrICAgIFx4MWJbMTs5MW06XHgxYlsxOzk3bSAnICsgc3RyKGJhY2spICsgJyBceDFiWzE7OTZtPlx4MWJbMTs5N20gJyArIHN0cihsZW4odXApKSArICcgPT5ceDFiWzE7OTJtTGl2ZVx4MWJbMTs5MW06XHgxYlsxOzk2bScgKyBzdHIobGVuKGJlcmhhc2lsKSkgKyAnIFx4MWJbMTs5N209Plx4MWJbMTs5M21DaGVja1x4MWJbMTs5MW06XHgxYlsxOzk2bScgKyBzdHIobGVuKGNla3BvaW50KSkpCiAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQoKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdcblx4MWJbMTs5MW1bIV0gS29uZWtzaSB0ZXJnYW5nZ3UnCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDljXHg5Nl0gVGlkYWsgYWRhIGtvbmVrc2knCgoKZGVmIGhhc2lsKCk6CiAgICBwcmludAogICAgcHJpbnQgNDAgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgIGZvciBiIGluIGJlcmhhc2lsOgogICAgICAgIHByaW50IGIKCiAgICBmb3IgYyBpbiBjZWtwb2ludDoKICAgICAgICBwcmludCBjCgogICAgcHJpbnQKICAgIHByaW50ICdceDFiWzMxbVt4XSBHYWdhbCBceDFiWzE7OTdtLS0+ICcgKyBzdHIobGVuKGdhZ2FsKSkKICAgIGtlbHVhcigpCgoKZGVmIHN1cGVyKCk6CiAgICBnbG9iYWwgdG9rZXQKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRva2VuIHRpZGFrIGRpdGVtdWthbicKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dpbigpCgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgcHJpbnQgJ1x4MWJbMTszNzs0MG0xLiBDcmFjayBkYXJpIGRhZnRhciBUZW1hbicKICAgIHByaW50ICdceDFiWzE7Mzc7NDBtMi4gQ3JhY2sgZGFyaSBtZW1iZXIgR3J1cCcKICAgIHByaW50ICdceDFiWzE7MzE7NDBtMC4gS2VtYmFsaScKICAgIHByaW50CiAgICBwaWxpaF9zdXBlcigpCgoKZGVmIHBpbGloX3N1cGVyKCk6CiAgICBwZWFrID0gcmF3X2lucHV0KCdceDFiWzE7OTFtLVx4ZTJceDk2XHhiYVx4MWJbMTs5N20gJykKICAgIGlmIHBlYWsgPT0gJyc6CiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gSmFuZ2FuIGtvc29uZycKICAgICAgICBwaWxpaF9zdXBlcigpCiAgICBlbHNlOgogICAgICAgIGlmIHBlYWsgPT0gJzEnOgogICAgICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICAgICAgcHJpbnQgbG9nbwogICAgICAgICAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICBqYWxhbignXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtTWVuZ2FtYmlsIGlkIHRlbWFuIFx4MWJbMTs5N20uLi4nKQogICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZS9mcmllbmRzP2FjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgICAgIHogPSBqc29uLmxvYWRzKHIudGV4dCkKICAgICAgICAgICAgZm9yIHMgaW4gelsnZGF0YSddOgogICAgICAgICAgICAgICAgaWQuYXBwZW5kKHNbJ2lkJ10pCgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIHBlYWsgPT0gJzInOgogICAgICAgICAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgICAgICAgICBwcmludCBsb2dvCiAgICAgICAgICAgICAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICAgICAgaWRnID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1JRCBHcnVwICAgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcpCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vZ3JvdXAvP2lkPScgKyBpZGcgKyAnJmFjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgICAgICAgICAgICAgYXN3ID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHgxYlsxOzk2bVx4ZTJceDljXHg5M1x4MWJbMTs5MW1dIFx4MWJbMTs5Mm1OYW1hIGdydXAgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcgKyBhc3dbJ25hbWUnXQogICAgICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIEdydXAgdGlkYWsgZGl0ZW11a2FuJwogICAgICAgICAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgICAgICAgICAgc3VwZXIoKQoKICAgICAgICAgICAgICAgIHJlID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWRnICsgJy9tZW1iZXJzP2ZpZWxkcz1uYW1lLGlkJmxpbWl0PTk5OTk5OTk5OSZhY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgICAgICAgICAgICAgcyA9IGpzb24ubG9hZHMocmUudGV4dCkKICAgICAgICAgICAgICAgIGZvciBpIGluIHNbJ2RhdGEnXToKICAgICAgICAgICAgICAgICAgICBpZC5hcHBlbmQoaVsnaWQnXSkKCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpZiBwZWFrID09ICcwJzoKICAgICAgICAgICAgICAgICAgICBtZW51X2hhY2soKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5Y1x4OTZdIFx4MWJbMTs5N20nICsgcGVhayArICcgXHgxYlsxOzkxbVRpZGFrIGFkYScKICAgICAgICAgICAgICAgICAgICBwaWxpaF9zdXBlcigpCiAgICBwcmludCAnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtSnVtbGFoIElEIFx4MWJbMTs5MW06IFx4MWJbMTs5N20nICsgc3RyKGxlbihpZCkpCiAgICBqYWxhbignXHgxYlsxOzkxbVtceGUyXHg5Y1x4YmFdIFx4MWJbMTs5Mm1UdW5nZ3Ugc2ViZW50YXIgXHgxYlsxOzk3bS4uLicpCiAgICB0aXRpayA9IFsnLiAgICcsICcuLiAgJywgJy4uLiAnXQogICAgZm9yIG8gaW4gdGl0aWs6CiAgICAgICAgcHJpbnQgJ1xyXHJceDFiWzE7OTFtW1x4MWJbMTs5Nm1ceGUyXHg5Y1x4YjhceDFiWzE7OTFtXSBceDFiWzE7OTJtQ3JhY2sgXHgxYlsxOzk3bScgKyBvLAogICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgIHRpbWUuc2xlZXAoMSkKCiAgICBwcmludAogICAgcHJpbnQgNDAgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKCiAgICBkZWYgbWFpbihhcmcpOgogICAgICAgIHVzZXIgPSBhcmcKICAgICAgICB0cnk6CiAgICAgICAgICAgIGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyB1c2VyICsgJy8/YWNjZXNzX3Rva2VuPScgKyB0b2tldCkKICAgICAgICAgICAgYiA9IGpzb24ubG9hZHMoYS50ZXh0KQogICAgICAgICAgICBwYXNzMSA9IGJbJ2ZpcnN0X25hbWUnXSArICcxMjMnCiAgICAgICAgICAgIGRhdGEgPSB1cmxsaWIudXJsb3BlbignaHR0cHM6Ly9iLWFwaS5mYWNlYm9vay5jb20vbWV0aG9kL2F1dGgubG9naW4/YWNjZXNzX3Rva2VuPTIzNzc1OTkwOTU5MTY1NSUyNTI1N0MwZjE0MGFhYmVkZmI2NWFjMjdhNzM5ZWQxYTIyNjNiMSZmb3JtYXQ9anNvbiZzZGtfdmVyc2lvbj0yJmVtYWlsPScgKyB1c2VyICsgJyZsb2NhbGU9ZW5fVVMmcGFzc3dvcmQ9JyArIHBhc3MxICsgJyZzZGs9aW9zJmdlbmVyYXRlX3Nlc3Npb25fY29va2llcz0xJnNpZz0zZjU1NWY5OWZiNjFmY2Q3YWEwYzQ0ZjU4ZjUyMmVmNicpCiAgICAgICAgICAgIHEgPSBqc29uLmxvYWQoZGF0YSkKICAgICAgICAgICAgaWYgJ2FjY2Vzc190b2tlbicgaW4gcToKICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTdtW1x4MWJbMTs5Mm1PS1x4ZTJceDljXHg5M1x4MWJbMTs5N21dICcgKyB1c2VyICsgJyB8ICcgKyBwYXNzMQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yX21zZyddOgogICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTdtW1x4MWJbMTs5M21DUFx4ZTJceDljXHg5YVx4MWJbMTs5N21dICcgKyB1c2VyICsgJyB8ICcgKyBwYXNzMQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwYXNzMiA9IGJbJ2ZpcnN0X25hbWUnXSArICcxMjM0NScKICAgICAgICAgICAgICAgICAgICBkYXRhID0gdXJsbGliLnVybG9wZW4oJ2h0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2FjY2Vzc190b2tlbj0yMzc3NTk5MDk1OTE2NTUlMjUyNTdDMGYxNDBhYWJlZGZiNjVhYzI3YTczOWVkMWEyMjYzYjEmZm9ybWF0PWpzb24mc2RrX3ZlcnNpb249MiZlbWFpbD0nICsgdXNlciArICcmbG9jYWxlPWVuX1VTJnBhc3N3b3JkPScgKyBwYXNzMiArICcmc2RrPWlvcyZnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXM9MSZzaWc9M2Y1NTVmOTlmYjYxZmNkN2FhMGM0NGY1OGY1MjJlZjYnKQogICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWQoZGF0YSkKICAgICAgICAgICAgICAgICAgICBpZiAnYWNjZXNzX3Rva2VuJyBpbiBxOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzk3bVtceDFiWzE7OTJtT0tceGUyXHg5Y1x4OTNceDFiWzE7OTdtXSAnICsgdXNlciArICcgfCAnICsgcGFzczIKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3JfbXNnJ106CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzk3bVtceDFiWzE7OTNtQ1BceGUyXHg5Y1x4OWFceDFiWzE7OTdtXSAnICsgdXNlciArICcgfCAnICsgcGFzczIKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MzID0gYlsnbGFzdF9uYW1lJ10gKyAnMTIzJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHVybGxpYi51cmxvcGVuKCdodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvYXV0aC5sb2dpbj9hY2Nlc3NfdG9rZW49MjM3NzU5OTA5NTkxNjU1JTI1MjU3QzBmMTQwYWFiZWRmYjY1YWMyN2E3MzllZDFhMjI2M2IxJmZvcm1hdD1qc29uJnNka192ZXJzaW9uPTImZW1haWw9JyArIHVzZXIgKyAnJmxvY2FsZT1lbl9VUyZwYXNzd29yZD0nICsgcGFzczMgKyAnJnNkaz1pb3MmZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzPTEmc2lnPTNmNTU1Zjk5ZmI2MWZjZDdhYTBjNDRmNThmNTIyZWY2JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWQoZGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdhY2Nlc3NfdG9rZW4nIGluIHE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5N21bXHgxYlsxOzkybU9LXHhlMlx4OWNceDkzXHgxYlsxOzk3bV0gJyArIHVzZXIgKyAnIHwgJyArIHBhc3MzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvcl9tc2cnXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5N21bXHgxYlsxOzkzbUNQXHhlMlx4OWNceDlhXHgxYlsxOzk3bV0gJyArIHVzZXIgKyAnIHwgJyArIHBhc3MzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFoaXIgPSBiWydiaXJ0aGRheSddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3M0ID0gbGFoaXIucmVwbGFjZSgnLycsICcnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gdXJsbGliLnVybG9wZW4oJ2h0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2FjY2Vzc190b2tlbj0yMzc3NTk5MDk1OTE2NTUlMjUyNTdDMGYxNDBhYWJlZGZiNjVhYzI3YTczOWVkMWEyMjYzYjEmZm9ybWF0PWpzb24mc2RrX3ZlcnNpb249MiZlbWFpbD0nICsgdXNlciArICcmbG9jYWxlPWVuX1VTJnBhc3N3b3JkPScgKyBwYXNzNCArICcmc2RrPWlvcyZnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXM9MSZzaWc9M2Y1NTVmOTlmYjYxZmNkN2FhMGM0NGY1OGY1MjJlZjYnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0ganNvbi5sb2FkKGRhdGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdhY2Nlc3NfdG9rZW4nIGluIHE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzk3bVtceDFiWzE7OTJtT0tceGUyXHg5Y1x4OTNceDFiWzE7OTdtXSAnICsgdXNlciArICcgfCAnICsgcGFzczQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvcl9tc2cnXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzk3bVtceDFiWzE7OTNtQ1BceGUyXHg5Y1x4OWFceDFiWzE7OTdtXSAnICsgdXNlciArICcgfCAnICsgcGFzczQKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHBhc3MKCiAgICBwID0gVGhyZWFkUG9vbCgzMCkKICAgIHAubWFwKG1haW4sIGlkKQogICAgcHJpbnQgJ1xuXHgxYlsxOzkxbVsrXSBceDFiWzE7OTdtU2VsZXNhaScKICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICBzdXBlcigpCgoKZGVmIGJydXRlKCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUb2tlbiB0aWRhayBkaXRlbXVrYW4nCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9naW4oKQogICAgZWxzZToKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgNDAgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICB0cnk6CiAgICAgICAgICAgIGVtYWlsID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1JRFx4MWJbMTs5N20vXHgxYlsxOzkybUVtYWlsXHgxYlsxOzk3bS9ceDFiWzE7OTJtSHAgXHgxYlsxOzk3bVRhcmdldCBceDFiWzE7OTFtOlx4MWJbMTs5N20gJykKICAgICAgICAgICAgcGFzc3cgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybVdvcmRsaXN0IFx4MWJbMTs5N21leHQobGlzdC50eHQpIFx4MWJbMTs5MW06IFx4MWJbMTs5N20nKQogICAgICAgICAgICB0b3RhbCA9IG9wZW4ocGFzc3csICdyJykKICAgICAgICAgICAgdG90YWwgPSB0b3RhbC5yZWFkbGluZXMoKQogICAgICAgICAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceDFiWzE7OTZtXHhlMlx4OWNceDkzXHgxYlsxOzkxbV0gXHgxYlsxOzkybVRhcmdldCBceDFiWzE7OTFtOlx4MWJbMTs5N20gJyArIGVtYWlsCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1KdW1sYWhceDFiWzE7OTZtICcgKyBzdHIobGVuKHRvdGFsKSkgKyAnIFx4MWJbMTs5Mm1QYXNzd29yZCcKICAgICAgICAgICAgamFsYW4oJ1x4MWJbMTs5MW1bXHhlMlx4OWNceGJhXSBceDFiWzE7OTJtVHVuZ2d1IHNlYmVudGFyIFx4MWJbMTs5N20uLi4nKQogICAgICAgICAgICBzYW5kaSA9IG9wZW4ocGFzc3csICdyJykKICAgICAgICAgICAgZm9yIHB3IGluIHNhbmRpOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHB3ID0gcHcucmVwbGFjZSgnXG4nLCAnJykKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LndyaXRlKCdcclx4MWJbMTs5MW1bXHgxYlsxOzk2bVx4ZTJceDljXHhiOFx4MWJbMTs5MW1dIFx4MWJbMTs5Mm1NZW5jb2JhIFx4MWJbMTs5N20nICsgcHcpCiAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9iLWFwaS5mYWNlYm9vay5jb20vbWV0aG9kL2F1dGgubG9naW4/YWNjZXNzX3Rva2VuPTIzNzc1OTkwOTU5MTY1NSUyNTI1N0MwZjE0MGFhYmVkZmI2NWFjMjdhNzM5ZWQxYTIyNjNiMSZmb3JtYXQ9anNvbiZzZGtfdmVyc2lvbj0yJmVtYWlsPScgKyBlbWFpbCArICcmbG9jYWxlPWVuX1VTJnBhc3N3b3JkPScgKyBwdyArICcmc2RrPWlvcyZnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXM9MSZzaWc9M2Y1NTVmOTlmYjYxZmNkN2FhMGM0NGY1OGY1MjJlZjYnKQogICAgICAgICAgICAgICAgICAgIG1wc2ggPSBqc29uLmxvYWRzKGRhdGEudGV4dCkKICAgICAgICAgICAgICAgICAgICBpZiAnYWNjZXNzX3Rva2VuJyBpbiBtcHNoOgogICAgICAgICAgICAgICAgICAgICAgICBkYXBhdCA9IG9wZW4oJ0JydXRlLnR4dCcsICd3JykKICAgICAgICAgICAgICAgICAgICAgICAgZGFwYXQud3JpdGUoZW1haWwgKyAnIHwgJyArIHB3ICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICAgICAgZGFwYXQuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXG5ceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1EaXRlbXVrYW4uJwogICAgICAgICAgICAgICAgICAgICAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5ZVx4YjldIFx4MWJbMTs5Mm1Vc2VybmFtZSBceDFiWzE7OTFtOlx4MWJbMTs5N20gJyArIGVtYWlsCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDllXHhiOV0gXHgxYlsxOzkybVBhc3N3b3JkIFx4MWJbMTs5MW06XHgxYlsxOzk3bSAnICsgcHcKICAgICAgICAgICAgICAgICAgICAgICAga2VsdWFyKCkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gbXBzaFsnZXJyb3JfbXNnJ106CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWtzID0gb3BlbignQnJ1dGVjZWtwb2ludC50eHQnLCAndycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWtzLndyaXRlKGVtYWlsICsgJyB8ICcgKyBwdyArICdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWtzLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdcblx4MWJbMTs5MW1bK10gXHgxYlsxOzkybURpdGVtdWthbi4nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gXHgxYlsxOzkzbUFrdW4ga2VuYSBDaGVja3BvaW50JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWVceGI5XSBceDFiWzE7OTJtVXNlcm5hbWUgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcgKyBlbWFpbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWVceGI5XSBceDFiWzE7OTJtUGFzc3dvcmQgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcgKyBwdwogICAgICAgICAgICAgICAgICAgICAgICAgICAga2VsdWFyKCkKICAgICAgICAgICAgICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBLb25la3NpIEVycm9yJwogICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKCiAgICAgICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIEZpbGUgdGlkYWsgZGl0ZW11a2FuLi4uJwogICAgICAgICAgICBwcmludCAnXG5ceDFiWzE7OTFtWyFdIFx4MWJbMTs5Mm1TZXBlcnRpbnlhIGthbXUgdGlkYWsgbWVtaWxpa2kgd29yZGxpc3QnCiAgICAgICAgICAgIHRhbnlhdygpCgoKZGVmIHRhbnlhdygpOgogICAgd2h5ID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWz9dIFx4MWJbMTs5Mm1JbmdpbiBtZW1idWF0IHdvcmRsaXN0ID8gXHgxYlsxOzkybVt5L3RdXHgxYlsxOzkxbTpceDFiWzE7OTdtICcpCiAgICBpZiB3aHkgPT0gJyc6CiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gVG9sb25nIHBpbGloIFx4MWJbMTs5N20oeS90KScKICAgICAgICB0YW55YXcoKQogICAgZWxzZToKICAgICAgICBpZiB3aHkgPT0gJ3knOgogICAgICAgICAgICB3b3JkbGlzdCgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgd2h5ID09ICdZJzoKICAgICAgICAgICAgICAgIHdvcmRsaXN0KCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmIHdoeSA9PSAndCc6CiAgICAgICAgICAgICAgICAgICAgbWVudV9oYWNrKCkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgaWYgd2h5ID09ICdUJzoKICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9oYWNrKCkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUb2xvbmcgcGlsaWggXHgxYlsxOzk3bSh5L3QpJwogICAgICAgICAgICAgICAgICAgICAgICB0YW55YXcoKQoKCmRlZiBtZW51X3lhaG9vKCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUb2tlbiB0aWRhayBkaXRlbXVrYW4nCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9naW4oKQoKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgcHJpbnQgbG9nbwogICAgcHJpbnQgNDAgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgIHByaW50ICdceDFiWzE7Mzc7NDBtMS4gRGFyaSB0ZW1hbiBmYWNlYm9vaycKICAgIHByaW50ICdceDFiWzE7Mzc7NDBtMi4gR3VuYWthbiBGaWxlJwogICAgcHJpbnQgJ1x4MWJbMTszMTs0MG0wLiBLZW1iYWxpJwogICAgcHJpbnQKICAgIHlhaG9vX3BpbGloKCkKCgpkZWYgeWFob29fcGlsaWgoKToKICAgIGdvID0gcmF3X2lucHV0KCdceDFiWzE7OTFtLVx4ZTJceDk2XHhiYVx4MWJbMTs5N20gJykKICAgIGlmIGdvID09ICcnOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIEphbmdhbiBrb3NvbmcnCiAgICAgICAgeWFob29fcGlsaWgoKQogICAgZWxzZToKICAgICAgICBpZiBnbyA9PSAnMSc6CiAgICAgICAgICAgIHlhaG9vZnJpZW5kcygpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgZ28gPT0gJzInOgogICAgICAgICAgICAgICAgeWFob29saXN0KCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmIGdvID09ICcwJzoKICAgICAgICAgICAgICAgICAgICBtZW51X2hhY2soKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5Y1x4OTZdIFx4MWJbMTs5N20nICsgZ28gKyAnIFx4MWJbMTs5MW1UaWRhayBhZGEnCiAgICAgICAgICAgICAgICAgICAgeWFob29fcGlsaWgoKQoKCmRlZiB5YWhvb2ZyaWVuZHMoKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRva2VuIHRpZGFrIGRpdGVtdWthbicKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dpbigpCgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgbXBzaCA9IFtdCiAgICBqbWwgPSAwCiAgICBqYWxhbignXHgxYlsxOzkxbVtceGUyXHg5Y1x4YmFdIFx4MWJbMTs5Mm1UdW5nZ3Ugc2ViZW50YXIgXHgxYlsxOzk3bS4uLicpCiAgICB0ZW1hbiA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWUvZnJpZW5kcz9hY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAga2ltYWsgPSBqc29uLmxvYWRzKHRlbWFuLnRleHQpCiAgICBzYXZlID0gb3BlbignTWFpbFZ1bG4udHh0JywgJ3cnKQogICAgcHJpbnQgNDAgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgIGZvciB3IGluIGtpbWFrWydkYXRhJ106CiAgICAgICAgam1sICs9IDEKICAgICAgICBtcHNoLmFwcGVuZChqbWwpCiAgICAgICAgaWQgPSB3WydpZCddCiAgICAgICAgbmFtYSA9IHdbJ25hbWUnXQogICAgICAgIGxpbmtzID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWQgKyAnP2FjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgeiA9IGpzb24ubG9hZHMobGlua3MudGV4dCkKICAgICAgICB0cnk6CiAgICAgICAgICAgIG1haWwgPSB6WydlbWFpbCddCiAgICAgICAgICAgIHlhaG9vID0gcmUuY29tcGlsZSgnQC4qJykKICAgICAgICAgICAgb3R3ID0geWFob28uc2VhcmNoKG1haWwpLmdyb3VwKCkKICAgICAgICAgICAgaWYgJ3lhaG9vLmNvbScgaW4gb3R3OgogICAgICAgICAgICAgICAgYnIub3BlbignaHR0cHM6Ly9sb2dpbi55YWhvby5jb20vY29uZmlnL2xvZ2luPy5zcmM9ZnBjdHgmLmludGw9aWQmLmxhbmc9aWQtSUQmLmRvbmU9aHR0cHM6Ly9pZC55YWhvby5jb20nKQogICAgICAgICAgICAgICAgYnIuX2ZhY3RvcnkuaXNfaHRtbCA9IFRydWUKICAgICAgICAgICAgICAgIGJyLnNlbGVjdF9mb3JtKG5yPTApCiAgICAgICAgICAgICAgICBiclsndXNlcm5hbWUnXSA9IG1haWwKICAgICAgICAgICAgICAgIGtsaWsgPSBici5zdWJtaXQoKS5yZWFkKCkKICAgICAgICAgICAgICAgIGpvayA9IHJlLmNvbXBpbGUoJyJtZXNzYWdlcy5FUlJPUl9JTlZBTElEX1VTRVJOQU1FIj4uKicpCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgcGVrID0gam9rLnNlYXJjaChrbGlrKS5ncm91cCgpCiAgICAgICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWNceDk2XSBceDFiWzE7OTJtRW1haWwgXHgxYlsxOzkxbTpceDFiWzE7OTFtICcgKyBtYWlsICsgJyBceDFiWzE7OTdtW1x4MWJbMTs5Mm0nICsgdnVsbm90ICsgJ1x4MWJbMTs5N21dJwogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAgICAgaWYgJyJtZXNzYWdlcy5FUlJPUl9JTlZBTElEX1VTRVJOQU1FIj4nIGluIHBlazoKICAgICAgICAgICAgICAgICAgICBzYXZlLndyaXRlKG1haWwgKyAnXG4nKQogICAgICAgICAgICAgICAgICAgIHByaW50IDQwICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHgxYlsxOzk2bVx4ZTJceDljXHg5M1x4MWJbMTs5MW1dIFx4MWJbMTs5Mm1OYW1hICBceDFiWzE7OTFtOlx4MWJbMTs5N20gJyArIG5hbWEKICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5ZVx4YjldIFx4MWJbMTs5Mm1JRCAgICBceDFiWzE7OTFtOlx4MWJbMTs5N20gJyArIGlkCiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWVceGI5XSBceDFiWzE7OTJtRW1haWwgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcgKyBtYWlsICsgJyBbXHgxYlsxOzkybScgKyB2dWxuICsgJ1x4MWJbMTs5N21dJwogICAgICAgICAgICAgICAgICAgIHByaW50IDQwICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDljXHg5Nl0gXHgxYlsxOzkybUVtYWlsIFx4MWJbMTs5MW06XHgxYlsxOzkxbSAnICsgbWFpbCArICcgXHgxYlsxOzk3bVtceDFiWzE7OTJtJyArIHZ1bG5vdCArICdceDFiWzE7OTdtXScKICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgIHBhc3MKCiAgICBwcmludCAnXG5ceDFiWzE7OTFtWytdIFx4MWJbMTs5N21TZWxlc2FpJwogICAgcHJpbnQgJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzk3bVRlcnNpbXBhbiBceDFiWzE7OTFtOlx4MWJbMTs5N20gTWFpbFZ1bG4udHh0JwogICAgc2F2ZS5jbG9zZSgpCiAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgbWVudV95YWhvbygpCgoKZGVmIHlhaG9vbGlzdCgpOgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICB0cnk6CiAgICAgICAgdG9rZXQgPSBvcGVuKCdsb2dpbi50eHQnLCAncicpLnJlYWQoKQogICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gVG9rZW4gdGlkYWsgZGl0ZW11a2FuJwogICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGxvZ2luKCkKICAgIGVsc2U6CiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgcHJpbnQgbG9nbwogICAgICAgIHByaW50IDQwICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgZmlsZXMgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybUZpbGUgXHgxYlsxOzkxbTogXHgxYlsxOzk3bScpCiAgICAgICAgdHJ5OgogICAgICAgICAgICB0b3RhbCA9IG9wZW4oZmlsZXMsICdyJykKICAgICAgICAgICAgbWFpbCA9IHRvdGFsLnJlYWRsaW5lcygpCiAgICAgICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIEZpbGUgdGlkYWsgYWRhJwogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBtZW51X3lhaG9vKCkKCiAgICBtcHNoID0gW10KICAgIGptbCA9IDAKICAgIGphbGFuKCdceDFiWzE7OTFtW1x4ZTJceDljXHhiYV0gXHgxYlsxOzkybVR1bmdndSBzZWJlbnRhciBceDFiWzE7OTdtLi4uJykKICAgIHNhdmUgPSBvcGVuKCdNYWlsVnVsbi50eHQnLCAndycpCiAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgcHJpbnQgJ1x4MWJbMTs5MW1bP10gXHgxYlsxOzk3bVN0YXR1cyBceDFiWzE7OTFtOiAgXHgxYlsxOzk3bVJlZFtceDFiWzE7OTJtJyArIHZ1bG5vdCArICdceDFiWzE7OTdtXSAgR3JlZW5bXHgxYlsxOzkybScgKyB2dWxuICsgJ1x4MWJbMTs5N21dJwogICAgcHJpbnQKICAgIG1haWwgPSBvcGVuKGZpbGVzLCAncicpLnJlYWRsaW5lcygpCiAgICBmb3IgcHcgaW4gbWFpbDoKICAgICAgICBtYWlsID0gcHcucmVwbGFjZSgnXG4nLCAnJykKICAgICAgICBqbWwgKz0gMQogICAgICAgIG1wc2guYXBwZW5kKGptbCkKICAgICAgICB5YWhvbyA9IHJlLmNvbXBpbGUoJ0AuKicpCiAgICAgICAgb3R3ID0geWFob28uc2VhcmNoKG1haWwpLmdyb3VwKCkKICAgICAgICBpZiAneWFob28uY29tJyBpbiBvdHc6CiAgICAgICAgICAgIGJyLm9wZW4oJ2h0dHBzOi8vbG9naW4ueWFob28uY29tL2NvbmZpZy9sb2dpbj8uc3JjPWZwY3R4Ji5pbnRsPWlkJi5sYW5nPWlkLUlEJi5kb25lPWh0dHBzOi8vaWQueWFob28uY29tJykKICAgICAgICAgICAgYnIuX2ZhY3RvcnkuaXNfaHRtbCA9IFRydWUKICAgICAgICAgICAgYnIuc2VsZWN0X2Zvcm0obnI9MCkKICAgICAgICAgICAgYnJbJ3VzZXJuYW1lJ10gPSBtYWlsCiAgICAgICAgICAgIGtsaWsgPSBici5zdWJtaXQoKS5yZWFkKCkKICAgICAgICAgICAgam9rID0gcmUuY29tcGlsZSgnIm1lc3NhZ2VzLkVSUk9SX0lOVkFMSURfVVNFUk5BTUUiPi4qJykKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgcGVrID0gam9rLnNlYXJjaChrbGlrKS5ncm91cCgpCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtICcgKyBtYWlsCiAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgaWYgJyJtZXNzYWdlcy5FUlJPUl9JTlZBTElEX1VTRVJOQU1FIj4nIGluIHBlazoKICAgICAgICAgICAgICAgIHNhdmUud3JpdGUobWFpbCArICdcbicpCiAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybSAnICsgbWFpbAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW0gJyArIG1haWwKCiAgICBwcmludCAnXG5ceDFiWzE7OTFtWytdIFx4MWJbMTs5N21TZWxlc2FpJwogICAgcHJpbnQgJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzk3bVRlcnNpbXBhbiBceDFiWzE7OTFtOlx4MWJbMTs5N20gTWFpbFZ1bG4udHh0JwogICAgc2F2ZS5jbG9zZSgpCiAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgbWVudV95YWhvbygpCgoKZGVmIGdyYWIoKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRva2VuIHRpZGFrIGRpdGVtdWthbicKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dpbigpCgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgcHJpbnQgJ1x4MWJbMTszNzs0MG0xLiBBbWJpbCBJRCB0ZW1hbicKICAgIHByaW50ICdceDFiWzE7Mzc7NDBtMi4gQW1iaWwgSUQgdGVtYW4gZGFyaSB0ZW1hbicKICAgIHByaW50ICdceDFiWzE7Mzc7NDBtMy4gQW1iaWwgSUQgbWVtYmVyIEdSVVAnCiAgICBwcmludCAnXHgxYlsxOzM3OzQwbTQuIEFtYmlsIEVtYWlsIHRlbWFuJwogICAgcHJpbnQgJ1x4MWJbMTszNzs0MG01LiBBbWJpbCBFbWFpbCB0ZW1hbiBkYXJpIHRlbWFuJwogICAgcHJpbnQgJ1x4MWJbMTszNzs0MG02LiBBbWJpbCBObyBIUCB0ZW1hbicKICAgIHByaW50ICdceDFiWzE7Mzc7NDBtNy4gQW1iaWwgTm8gSFAgdGVtYW4gZGFyaSB0ZW1hbicKICAgIHByaW50ICdceDFiWzE7MzE7NDBtMC4gS2VtYmFsaScKICAgIHByaW50CiAgICBncmFiX3BpbGloKCkKCgpkZWYgZ3JhYl9waWxpaCgpOgogICAgY3VpaCA9IHJhd19pbnB1dCgnXHgxYlsxOzkxbS1ceGUyXHg5Nlx4YmFceDFiWzE7OTdtICcpCiAgICBpZiBjdWloID09ICcnOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIEphbmdhbiBrb3NvbmcnCiAgICAgICAgZ3JhYl9waWxpaCgpCiAgICBlbHNlOgogICAgICAgIGlmIGN1aWggPT0gJzEnOgogICAgICAgICAgICBpZF90ZW1hbigpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaWYgY3VpaCA9PSAnMic6CiAgICAgICAgICAgICAgICBpZGZyb21fdGVtYW4oKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaWYgY3VpaCA9PSAnMyc6CiAgICAgICAgICAgICAgICAgICAgaWRfbWVtYmVyX2dydXAoKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBpZiBjdWloID09ICc0JzoKICAgICAgICAgICAgICAgICAgICAgICAgZW1haWwoKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGN1aWggPT0gJzUnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1haWxmcm9tX3RlbWFuKCkKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGN1aWggPT0gJzYnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vbW9yX2hwKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY3VpaCA9PSAnNyc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhwZnJvbV90ZW1hbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgY3VpaCA9PSAnMCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51X2hhY2soKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWNceDk2XSBceDFiWzE7OTdtJyArIGN1aWggKyAnIFx4MWJbMTs5MW1UaWRhayBhZGEnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmFiX3BpbGloKCkKCgpkZWYgaWRfdGVtYW4oKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRva2VuIHRpZGFrIGRpdGVtdWthbicKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dpbigpCiAgICBlbHNlOgogICAgICAgIHRyeToKICAgICAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgICAgIHByaW50IGxvZ28KICAgICAgICAgICAgcHJpbnQgNDAgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWUvZnJpZW5kcz9hY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgICAgICAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgICAgIHNhdmVfaWQgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybVNpbXBhbiBGaWxlIFx4MWJbMTs5N21leHQoZmlsZS50eHQpIFx4MWJbMTs5MW06IFx4MWJbMTs5N20nKQogICAgICAgICAgICBieiA9IG9wZW4oc2F2ZV9pZCwgJ3cnKQogICAgICAgICAgICBqYWxhbignXHgxYlsxOzkxbVtceGUyXHg5Y1x4YmFdIFx4MWJbMTs5Mm1UdW5nZ3Ugc2ViZW50YXIgXHgxYlsxOzk3bS4uLicpCiAgICAgICAgICAgIHByaW50IDQwICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgICAgIGZvciBhaCBpbiB6WydkYXRhJ106CiAgICAgICAgICAgICAgICBpZHRlbWFuLmFwcGVuZChhaFsnaWQnXSkKICAgICAgICAgICAgICAgIGJ6LndyaXRlKGFoWydpZCddICsgJ1xuJykKICAgICAgICAgICAgICAgIHByaW50ICdcclx4MWJbMTs5Mm1OYW1hXHgxYlsxOzkxbSAgOlx4MWJbMTs5N20gJyArIGFoWyduYW1lJ10KICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtSUQgICBceDFiWzE7OTFtIDogXHgxYlsxOzk3bScgKyBhaFsnaWQnXQogICAgICAgICAgICAgICAgcHJpbnQgNDAgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKCiAgICAgICAgICAgIHByaW50ICdcblxyXHgxYlsxOzkxbVsrXSBceDFiWzE7OTdtSnVtbGFoIElEIFx4MWJbMTs5Nm0lcycgJSBsZW4oaWR0ZW1hbikKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzk3bUZpbGUgdGVyc2ltcGFuIFx4MWJbMTs5MW06IFx4MWJbMTs5N20nICsgc2F2ZV9pZAogICAgICAgICAgICBiei5jbG9zZSgpCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGdyYWIoKQogICAgICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBLZXNhbGFoYW4gc2FhdCBtZW1idWF0IGZpbGUnCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGdyYWIoKQogICAgICAgIGV4Y2VwdCAoS2V5Ym9hcmRJbnRlcnJ1cHQsIEVPRkVycm9yKToKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gVGVyaGVudGknCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGdyYWIoKQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgb3MucmVtb3ZlKHNhdmVfaWQpCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIEtlc2FsYWhhbiB0ZXJqYWRpJwogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBncmFiKCkKICAgICAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6CiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDljXHg5Nl0gVGlkYWsgYWRhIGtvbmVrc2knCiAgICAgICAgICAgIGtlbHVhcigpCgoKZGVmIGlkZnJvbV90ZW1hbigpOgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICB0cnk6CiAgICAgICAgdG9rZXQgPSBvcGVuKCdsb2dpbi50eHQnLCAncicpLnJlYWQoKQogICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gVG9rZW4gdGlkYWsgZGl0ZW11a2FuJwogICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGxvZ2luKCkKICAgIGVsc2U6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICAgICAgcHJpbnQgbG9nbwogICAgICAgICAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICBpZHQgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybU1hc3VrYW4gSUQgVGVtYW4gXHgxYlsxOzkxbTogXHgxYlsxOzk3bScpCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGpvayA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkdCArICc/YWNjZXNzX3Rva2VuPScgKyB0b2tldCkKICAgICAgICAgICAgICAgIG9wID0ganNvbi5sb2Fkcyhqb2sudGV4dCkKICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4MWJbMTs5Nm1ceGUyXHg5Y1x4OTNceDFiWzE7OTFtXSBceDFiWzE7OTJtRnJvbVx4MWJbMTs5MW0gOlx4MWJbMTs5N20gJyArIG9wWyduYW1lJ10KICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gQmVsdW0gYmVydGVtYW4nCiAgICAgICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICAgICAgZ3JhYigpCgogICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWR0ICsgJz9maWVsZHM9ZnJpZW5kcy5saW1pdCg1MDAwKSZhY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgICAgICAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgICAgIHNhdmVfaWR0ID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1TaW1wYW4gRmlsZSBceDFiWzE7OTdtZXh0KGZpbGUudHh0KSBceDFiWzE7OTFtOiBceDFiWzE7OTdtJykKICAgICAgICAgICAgYnogPSBvcGVuKHNhdmVfaWR0LCAndycpCiAgICAgICAgICAgIGphbGFuKCdceDFiWzE7OTFtW1x4ZTJceDljXHhiYV0gXHgxYlsxOzkybVR1bmdndSBzZWJlbnRhciBceDFiWzE7OTdtLi4uJykKICAgICAgICAgICAgcHJpbnQgNDAgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICAgICAgZm9yIGFoIGluIHpbJ2ZyaWVuZHMnXVsnZGF0YSddOgogICAgICAgICAgICAgICAgaWRmcm9tdGVtYW4uYXBwZW5kKGFoWydpZCddKQogICAgICAgICAgICAgICAgYnoud3JpdGUoYWhbJ2lkJ10gKyAnXG4nKQogICAgICAgICAgICAgICAgcHJpbnQgJ1xyXHgxYlsxOzkybU5hbWFceDFiWzE7OTFtICA6XHgxYlsxOzk3bSAnICsgYWhbJ25hbWUnXQogICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1JRCAgIFx4MWJbMTs5MW0gOiBceDFiWzE7OTdtJyArIGFoWydpZCddCiAgICAgICAgICAgICAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwoKICAgICAgICAgICAgcHJpbnQgJ1xuXHJceDFiWzE7OTFtWytdIFx4MWJbMTs5N21KdW1sYWggSUQgXHgxYlsxOzk2bSVzJyAlIGxlbihpZGZyb210ZW1hbikKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzk3bUZpbGUgdGVyc2ltcGFuIFx4MWJbMTs5MW06IFx4MWJbMTs5N20nICsgc2F2ZV9pZHQKICAgICAgICAgICAgYnouY2xvc2UoKQogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBncmFiKCkKICAgICAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gS2VzYWxhaGFuIHNhYXQgbWVtYnVhdCBmaWxlJwogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBncmFiKCkKICAgICAgICBleGNlcHQgKEtleWJvYXJkSW50ZXJydXB0LCBFT0ZFcnJvcik6CiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRlcmhlbnRpJwogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBncmFiKCkKICAgICAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6CiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDljXHg5Nl0gVGlkYWsgYWRhIGtvbmVrc2knCiAgICAgICAgICAgIGtlbHVhcigpCgoKZGVmIGlkX21lbWJlcl9ncnVwKCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUb2tlbiB0aWRhayBkaXRlbXVrYW4nCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9naW4oKQogICAgZWxzZToKICAgICAgICB0cnk6CiAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgICAgICBwcmludCBsb2dvCiAgICAgICAgICAgIHByaW50IDQwICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgICAgIGlkID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1JRCBncnVwIFx4MWJbMTs5MW06XHgxYlsxOzk3bSAnKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9ncm91cC8/aWQ9JyArIGlkICsgJyZhY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgICAgICAgICAgICAgYXN3ID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceDFiWzE7OTZtXHhlMlx4OWNceDkzXHgxYlsxOzkxbV0gXHgxYlsxOzkybU5hbWEgZ3J1cCBceDFiWzE7OTFtOlx4MWJbMTs5N20gJyArIGFzd1snbmFtZSddCiAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIEdydXAgdGlkYWsgZGl0ZW11a2FuJwogICAgICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21LZW1iYWxpIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgICAgIGdyYWIoKQoKICAgICAgICAgICAgc2ltZyA9IHJhd19pbnB1dCgnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTdtU2ltcGFuIEZpbGUgXHgxYlsxOzk3bWV4dChmaWxlLnR4dCkgXHgxYlsxOzkxbTogXHgxYlsxOzk3bScpCiAgICAgICAgICAgIGIgPSBvcGVuKHNpbWcsICd3JykKICAgICAgICAgICAgamFsYW4oJ1x4MWJbMTs5MW1bXHhlMlx4OWNceGJhXSBceDFiWzE7OTJtVHVuZ2d1IHNlYmVudGFyIFx4MWJbMTs5N20uLi4nKQogICAgICAgICAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICByZSA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkICsgJy9tZW1iZXJzP2ZpZWxkcz1uYW1lLGlkJmFjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgICAgIHMgPSBqc29uLmxvYWRzKHJlLnRleHQpCiAgICAgICAgICAgIGZvciBpIGluIHNbJ2RhdGEnXToKICAgICAgICAgICAgICAgIGlkbWVtLmFwcGVuZChpWydpZCddKQogICAgICAgICAgICAgICAgYi53cml0ZShpWydpZCddICsgJ1xuJykKICAgICAgICAgICAgICAgIHByaW50ICdcclx4MWJbMTs5Mm1OYW1hXHgxYlsxOzkxbSAgOlx4MWJbMTs5N20gJyArIGlbJ25hbWUnXQogICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1JRCAgXHgxYlsxOzkxbSAgOlx4MWJbMTs5N20gJyArIGlbJ2lkJ10KICAgICAgICAgICAgICAgIHByaW50IDQwICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCgogICAgICAgICAgICBwcmludCAnXG5cclx4MWJbMTs5MW1bK10gXHgxYlsxOzk3bUp1bWxhaCBJRCBceDFiWzE7OTZtJXMnICUgbGVuKGlkbWVtKQogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTdtRmlsZSB0ZXJzaW1wYW4gXHgxYlsxOzkxbTogXHgxYlsxOzk3bScgKyBzaW1nCiAgICAgICAgICAgIGIuY2xvc2UoKQogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBncmFiKCkKICAgICAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gS2VzYWxhaGFuIHNhYXQgbWVtYnVhdCBmaWxlJwogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBncmFiKCkKICAgICAgICBleGNlcHQgKEtleWJvYXJkSW50ZXJydXB0LCBFT0ZFcnJvcik6CiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRlcmhlbnRpJwogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBncmFiKCkKICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgIG9zLnJlbW92ZShzaW1nKQogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBHcnVwIHRpZGFrIGRpdGVtdWthbicKICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21LZW1iYWxpIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgZ3JhYigpCiAgICAgICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5Y1x4OTZdIFRpZGFrIGFkYSBrb25la3NpJwogICAgICAgICAgICBrZWx1YXIoKQoKCmRlZiBlbWFpbCgpOgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICB0cnk6CiAgICAgICAgdG9rZXQgPSBvcGVuKCdsb2dpbi50eHQnLCAncicpLnJlYWQoKQogICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gVG9rZW4gdGlkYWsgZGl0ZW11a2FuJwogICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGxvZ2luKCkKICAgIGVsc2U6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICAgICAgcHJpbnQgbG9nbwogICAgICAgICAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICBtYWlscyA9IHJhd19pbnB1dCgnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtU2ltcGFuIEZpbGUgXHgxYlsxOzk3bWV4dChmaWxlLnR4dCkgXHgxYlsxOzkxbTogXHgxYlsxOzk3bScpCiAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lL2ZyaWVuZHM/YWNjZXNzX3Rva2VuPScgKyB0b2tldCkKICAgICAgICAgICAgYSA9IGpzb24ubG9hZHMoci50ZXh0KQogICAgICAgICAgICBtcHNoID0gb3BlbihtYWlscywgJ3cnKQogICAgICAgICAgICBqYWxhbignXHgxYlsxOzkxbVtceGUyXHg5Y1x4YmFdIFx4MWJbMTs5Mm1UdW5nZ3Ugc2ViZW50YXIgXHgxYlsxOzk3bS4uLicpCiAgICAgICAgICAgIHByaW50IDQwICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgICAgIGZvciBpIGluIGFbJ2RhdGEnXToKICAgICAgICAgICAgICAgIHggPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyBpWydpZCddICsgJz9hY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgICAgICAgICAgICAgeiA9IGpzb24ubG9hZHMoeC50ZXh0KQogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGVtLmFwcGVuZCh6WydlbWFpbCddKQogICAgICAgICAgICAgICAgICAgIG1wc2gud3JpdGUoelsnZW1haWwnXSArICdcbicpCiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1xyXHgxYlsxOzkybU5hbWFceDFiWzE7OTFtICA6XHgxYlsxOzk3bSAnICsgelsnbmFtZSddCiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1FbWFpbFx4MWJbMTs5MW0gOiBceDFiWzE7OTdtJyArIHpbJ2VtYWlsJ10KICAgICAgICAgICAgICAgICAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgICAgIHBhc3MKCiAgICAgICAgICAgIHByaW50ICdcblxyXHgxYlsxOzkxbVsrXSBceDFiWzE7OTdtSnVtbGFoIEVtYWlsXHgxYlsxOzk2bSVzJyAlIGxlbihlbSkKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzk3bUZpbGUgdGVyc2ltcGFuIFx4MWJbMTs5MW06IFx4MWJbMTs5N20nICsgbWFpbHMKICAgICAgICAgICAgbXBzaC5jbG9zZSgpCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGdyYWIoKQogICAgICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBLZXNhbGFoYW4gc2FhdCBtZW1idWF0IGZpbGUnCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGdyYWIoKQogICAgICAgIGV4Y2VwdCAoS2V5Ym9hcmRJbnRlcnJ1cHQsIEVPRkVycm9yKToKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gVGVyaGVudGknCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGdyYWIoKQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgb3MucmVtb3ZlKG1haWxzKQogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBLZXNhbGFoYW4gdGVyamFkaScKICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21LZW1iYWxpIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgZ3JhYigpCiAgICAgICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5Y1x4OTZdIFRpZGFrIGFkYSBrb25la3NpJwogICAgICAgICAgICBrZWx1YXIoKQoKCmRlZiBlbWFpbGZyb21fdGVtYW4oKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRva2VuIHRpZGFrIGRpdGVtdWthbicKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dpbigpCiAgICBlbHNlOgogICAgICAgIHRyeToKICAgICAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgICAgIHByaW50IGxvZ28KICAgICAgICAgICAgcHJpbnQgNDAgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICAgICAgaWR0ID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1NYXN1a2FuIElEIFRlbWFuIFx4MWJbMTs5MW06IFx4MWJbMTs5N20nKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBqb2sgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyBpZHQgKyAnP2FjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgICAgICAgICBvcCA9IGpzb24ubG9hZHMoam9rLnRleHQpCiAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceDFiWzE7OTZtXHhlMlx4OWNceDkzXHgxYlsxOzkxbV0gXHgxYlsxOzkybUZyb21ceDFiWzE7OTFtIDpceDFiWzE7OTdtICcgKyBvcFsnbmFtZSddCiAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIEJlbHVtIGJlcnRlbWFuJwogICAgICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21LZW1iYWxpIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgICAgIGdyYWIoKQoKICAgICAgICAgICAgbWFpbHMgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybVNpbXBhbiBGaWxlIFx4MWJbMTs5N21leHQoZmlsZS50eHQpIFx4MWJbMTs5MW06IFx4MWJbMTs5N20nKQogICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWR0ICsgJy9mcmllbmRzP2FjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgICAgIGEgPSBqc29uLmxvYWRzKHIudGV4dCkKICAgICAgICAgICAgbXBzaCA9IG9wZW4obWFpbHMsICd3JykKICAgICAgICAgICAgamFsYW4oJ1x4MWJbMTs5MW1bXHhlMlx4OWNceGJhXSBceDFiWzE7OTJtVHVuZ2d1IHNlYmVudGFyIFx4MWJbMTs5N20uLi4nKQogICAgICAgICAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICBmb3IgaSBpbiBhWydkYXRhJ106CiAgICAgICAgICAgICAgICB4ID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaVsnaWQnXSArICc/YWNjZXNzX3Rva2VuPScgKyB0b2tldCkKICAgICAgICAgICAgICAgIHogPSBqc29uLmxvYWRzKHgudGV4dCkKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBlbWZyb210ZW1hbi5hcHBlbmQoelsnZW1haWwnXSkKICAgICAgICAgICAgICAgICAgICBtcHNoLndyaXRlKHpbJ2VtYWlsJ10gKyAnXG4nKQogICAgICAgICAgICAgICAgICAgIHByaW50ICdcclx4MWJbMTs5Mm1OYW1hXHgxYlsxOzkxbSAgOlx4MWJbMTs5N20gJyArIHpbJ25hbWUnXQogICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtRW1haWxceDFiWzE7OTFtIDogXHgxYlsxOzk3bScgKyB6WydlbWFpbCddCiAgICAgICAgICAgICAgICAgICAgcHJpbnQgNDAgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICAgICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgICAgICAgICBwYXNzCgogICAgICAgICAgICBwcmludCAnXG5cclx4MWJbMTs5MW1bK10gXHgxYlsxOzk3bUp1bWxhaCBFbWFpbFx4MWJbMTs5Nm0lcycgJSBsZW4oZW1mcm9tdGVtYW4pCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWytdIFx4MWJbMTs5N21GaWxlIHRlcnNpbXBhbiBceDFiWzE7OTFtOiBceDFiWzE7OTdtJyArIG1haWxzCiAgICAgICAgICAgIG1wc2guY2xvc2UoKQogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBncmFiKCkKICAgICAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gS2VzYWxhaGFuIHNhYXQgbWVtYnVhdCBmaWxlJwogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBncmFiKCkKICAgICAgICBleGNlcHQgKEtleWJvYXJkSW50ZXJydXB0LCBFT0ZFcnJvcik6CiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRlcmhlbnRpJwogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBncmFiKCkKICAgICAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6CiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDljXHg5Nl0gVGlkYWsgYWRhIGtvbmVrc2knCiAgICAgICAgICAgIGtlbHVhcigpCgoKZGVmIG5vbW9yX2hwKCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUb2tlbiB0aWRhayBkaXRlbXVrYW4nCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9naW4oKQogICAgZWxzZToKICAgICAgICB0cnk6CiAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgICAgICBwcmludCBsb2dvCiAgICAgICAgICAgIHByaW50IDQwICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgICAgIG5vbXMgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybVNpbXBhbiBGaWxlIFx4MWJbMTs5N21leHQoZmlsZS50eHQpIFx4MWJbMTs5MW06IFx4MWJbMTs5N20nKQogICAgICAgICAgICB1cmwgPSAnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWUvZnJpZW5kcz9hY2Nlc3NfdG9rZW49JyArIHRva2V0CiAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQodXJsKQogICAgICAgICAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgICAgIG5vID0gb3Blbihub21zLCAndycpCiAgICAgICAgICAgIGphbGFuKCdceDFiWzE7OTFtW1x4ZTJceDljXHhiYV0gXHgxYlsxOzkybVR1bmdndSBzZWJlbnRhciBceDFiWzE7OTdtLi4uJykKICAgICAgICAgICAgcHJpbnQgNDAgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICAgICAgZm9yIG4gaW4gelsnZGF0YSddOgogICAgICAgICAgICAgICAgeCA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIG5bJ2lkJ10gKyAnP2FjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgICAgICAgICB6ID0ganNvbi5sb2Fkcyh4LnRleHQpCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgaHAuYXBwZW5kKHpbJ21vYmlsZV9waG9uZSddKQogICAgICAgICAgICAgICAgICAgIG5vLndyaXRlKHpbJ21vYmlsZV9waG9uZSddICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICBwcmludCAnXHJceDFiWzE7OTJtTmFtYVx4MWJbMTs5MW0gIDpceDFiWzE7OTdtICcgKyB6WyduYW1lJ10KICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybU5vbW9yXHgxYlsxOzkxbSA6IFx4MWJbMTs5N20nICsgelsnbW9iaWxlX3Bob25lJ10KICAgICAgICAgICAgICAgICAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgICAgIHBhc3MKCiAgICAgICAgICAgIHByaW50ICdcblxyXHgxYlsxOzkxbVsrXSBceDFiWzE7OTdtSnVtbGFoIE5vbW9yXHgxYlsxOzk2bSVzJyAlIGxlbihocCkKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzk3bUZpbGUgdGVyc2ltcGFuIFx4MWJbMTs5MW06IFx4MWJbMTs5N20nICsgbm9tcwogICAgICAgICAgICBuby5jbG9zZSgpCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGdyYWIoKQogICAgICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBLZXNhbGFoYW4gc2FhdCBtZW1idWF0IGZpbGUnCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGdyYWIoKQogICAgICAgIGV4Y2VwdCAoS2V5Ym9hcmRJbnRlcnJ1cHQsIEVPRkVycm9yKToKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gVGVyaGVudGknCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGdyYWIoKQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgb3MucmVtb3ZlKG5vbXMpCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIEtlc2FsYWhhbiB0ZXJqYWRpJwogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBncmFiKCkKICAgICAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6CiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDljXHg5Nl0gVGlkYWsgYWRhIGtvbmVrc2knCiAgICAgICAgICAgIGtlbHVhcigpCgoKZGVmIGhwZnJvbV90ZW1hbigpOgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICB0cnk6CiAgICAgICAgdG9rZXQgPSBvcGVuKCdsb2dpbi50eHQnLCAncicpLnJlYWQoKQogICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gVG9rZW4gdGlkYWsgZGl0ZW11a2FuJwogICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGxvZ2luKCkKICAgIGVsc2U6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICAgICAgcHJpbnQgbG9nbwogICAgICAgICAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICBpZHQgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybU1hc3VrYW4gSUQgVGVtYW4gXHgxYlsxOzkxbTogXHgxYlsxOzk3bScpCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGpvayA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkdCArICc/YWNjZXNzX3Rva2VuPScgKyB0b2tldCkKICAgICAgICAgICAgICAgIG9wID0ganNvbi5sb2Fkcyhqb2sudGV4dCkKICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4MWJbMTs5Nm1ceGUyXHg5Y1x4OTNceDFiWzE7OTFtXSBceDFiWzE7OTJtRnJvbVx4MWJbMTs5MW0gOlx4MWJbMTs5N20gJyArIG9wWyduYW1lJ10KICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gQmVsdW0gYmVydGVtYW4nCiAgICAgICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICAgICAgZ3JhYigpCgogICAgICAgICAgICBub21zID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1TaW1wYW4gRmlsZSBceDFiWzE7OTdtZXh0KGZpbGUudHh0KSBceDFiWzE7OTFtOiBceDFiWzE7OTdtJykKICAgICAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkdCArICcvZnJpZW5kcz9hY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgICAgICAgICBhID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgICAgIG5vID0gb3Blbihub21zLCAndycpCiAgICAgICAgICAgIGphbGFuKCdceDFiWzE7OTFtW1x4ZTJceDljXHhiYV0gXHgxYlsxOzkybVR1bmdndSBzZWJlbnRhciBceDFiWzE7OTdtLi4uJykKICAgICAgICAgICAgcHJpbnQgNDAgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICAgICAgZm9yIGkgaW4gYVsnZGF0YSddOgogICAgICAgICAgICAgICAgeCA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlbJ2lkJ10gKyAnP2FjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgICAgICAgICB6ID0ganNvbi5sb2Fkcyh4LnRleHQpCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgaHBmcm9tdGVtYW4uYXBwZW5kKHpbJ21vYmlsZV9waG9uZSddKQogICAgICAgICAgICAgICAgICAgIG5vLndyaXRlKHpbJ21vYmlsZV9waG9uZSddICsgJ1xuJykKICAgICAgICAgICAgICAgICAgICBwcmludCAnXHJceDFiWzE7OTJtTmFtYVx4MWJbMTs5MW0gIDpceDFiWzE7OTdtICcgKyB6WyduYW1lJ10KICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybU5vbW9yXHgxYlsxOzkxbSA6IFx4MWJbMTs5N20nICsgelsnbW9iaWxlX3Bob25lJ10KICAgICAgICAgICAgICAgICAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICAgICAgICAgIHBhc3MKCiAgICAgICAgICAgIHByaW50ICdcblxyXHgxYlsxOzkxbVsrXSBceDFiWzE7OTdtSnVtbGFoIE5vbW9yXHgxYlsxOzk2bSVzJyAlIGxlbihocGZyb210ZW1hbikKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzk3bUZpbGUgdGVyc2ltcGFuIFx4MWJbMTs5MW06IFx4MWJbMTs5N20nICsgbm9tcwogICAgICAgICAgICBuby5jbG9zZSgpCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGdyYWIoKQogICAgICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBLZXNhbGFoYW4gc2FhdCBtZW1idWF0IGZpbGUnCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGdyYWIoKQogICAgICAgIGV4Y2VwdCAoS2V5Ym9hcmRJbnRlcnJ1cHQsIEVPRkVycm9yKToKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gVGVyaGVudGknCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGdyYWIoKQogICAgICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWNceDk2XSBUaWRhayBhZGEga29uZWtzaScKICAgICAgICAgICAga2VsdWFyKCkKCgpkZWYgbWVudV9ib3QoKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRva2VuIHRpZGFrIGRpdGVtdWthbicKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dpbigpCgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgcHJpbnQgJ1x4MWJbMTszNzs0MG0xLiBCb3QgUmVhY3Rpb25zIFRhcmdldCBQb3N0JwogICAgcHJpbnQgJ1x4MWJbMTszNzs0MG0yLiBCb3QgUmVhY3Rpb25zIEdydXAgUG9zdCcKICAgIHByaW50ICdceDFiWzE7Mzc7NDBtMy4gQm90IEtvbWVuIFRhcmdldCBQb3N0JwogICAgcHJpbnQgJ1x4MWJbMTszNzs0MG00LiBCb3QgS29tZW4gR3J1cCBQb3N0JwogICAgcHJpbnQgJ1x4MWJbMTszNzs0MG01LiBNYXNzIGRlbGV0ZSBQb3N0JwogICAgcHJpbnQgJ1x4MWJbMTszNzs0MG02LiBUZXJpbWEgcGVybWludGFhbiBwZXJ0ZW1hbmFuJwogICAgcHJpbnQgJ1x4MWJbMTszNzs0MG03LiBIYXB1cyBwZXJ0ZW1hbmFuJwogICAgcHJpbnQgJ1x4MWJbMTszMTs0MG0wLiBLZW1iYWxpJwogICAgcHJpbnQKICAgIGJvdF9waWxpaCgpCgoKZGVmIGJvdF9waWxpaCgpOgogICAgYm90cyA9IHJhd19pbnB1dCgnXHgxYlsxOzkxbS1ceGUyXHg5Nlx4YmFceDFiWzE7OTdtICcpCiAgICBpZiBib3RzID09ICcnOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIEphbmdhbiBrb3NvbmcnCiAgICAgICAgYm90X3BpbGloKCkKICAgIGVsc2U6CiAgICAgICAgaWYgYm90cyA9PSAnMSc6CiAgICAgICAgICAgIG1lbnVfcmVhY3QoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIGJvdHMgPT0gJzInOgogICAgICAgICAgICAgICAgZ3J1cF9yZWFjdCgpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpZiBib3RzID09ICczJzoKICAgICAgICAgICAgICAgICAgICBib3Rfa29tZW4oKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBpZiBib3RzID09ICc0JzoKICAgICAgICAgICAgICAgICAgICAgICAgZ3J1cF9rb21lbigpCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgaWYgYm90cyA9PSAnNSc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVwb3N0KCkKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGJvdHMgPT0gJzYnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGJvdHMgPT0gJzcnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmZyaWVuZCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgYm90cyA9PSAnMCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDljXHg5Nl0gXHgxYlsxOzk3bScgKyBib3RzICsgJyBceDFiWzE7OTFtVGlkYWsgYWRhJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm90X3BpbGloKCkKCgpkZWYgbWVudV9yZWFjdCgpOgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICB0cnk6CiAgICAgICAgdG9rZXQgPSBvcGVuKCdsb2dpbi50eHQnLCAncicpLnJlYWQoKQogICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gVG9rZW4gdGlkYWsgZGl0ZW11a2FuJwogICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGxvZ2luKCkKCiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHByaW50IGxvZ28KICAgIHByaW50IDQwICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICBwcmludCAnXHgxYlsxOzM3OzQwbTEuIFx4MWJbMTs5N21MaWtlJwogICAgcHJpbnQgJ1x4MWJbMTszNzs0MG0yLiBceDFiWzE7OTdtTG92ZScKICAgIHByaW50ICdceDFiWzE7Mzc7NDBtMy4gXHgxYlsxOzk3bVdvdycKICAgIHByaW50ICdceDFiWzE7Mzc7NDBtNC4gXHgxYlsxOzk3bUhhaGEnCiAgICBwcmludCAnXHgxYlsxOzM3OzQwbTUuIFx4MWJbMTs5N21TZWRpaCcKICAgIHByaW50ICdceDFiWzE7Mzc7NDBtNi4gXHgxYlsxOzk3bU1hcmFoJwogICAgcHJpbnQgJ1x4MWJbMTszMTs0MG0wLiBLZW1iYWxpJwogICAgcHJpbnQKICAgIHJlYWN0X3BpbGloKCkKCgpkZWYgcmVhY3RfcGlsaWgoKToKICAgIGdsb2JhbCB0aXBlCiAgICBha3NpID0gcmF3X2lucHV0KCdceDFiWzE7OTFtLVx4ZTJceDk2XHhiYVx4MWJbMTs5N20gJykKICAgIGlmIGFrc2kgPT0gJyc6CiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gSmFuZ2FuIGtvc29uZycKICAgICAgICByZWFjdF9waWxpaCgpCiAgICBlbHNlOgogICAgICAgIGlmIGFrc2kgPT0gJzEnOgogICAgICAgICAgICB0aXBlID0gJ0xJS0UnCiAgICAgICAgICAgIHJlYWN0KCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBpZiBha3NpID09ICcyJzoKICAgICAgICAgICAgICAgIHRpcGUgPSAnTE9WRScKICAgICAgICAgICAgICAgIHJlYWN0KCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmIGFrc2kgPT0gJzMnOgogICAgICAgICAgICAgICAgICAgIHRpcGUgPSAnV09XJwogICAgICAgICAgICAgICAgICAgIHJlYWN0KCkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgaWYgYWtzaSA9PSAnNCc6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpcGUgPSAnSEFIQScKICAgICAgICAgICAgICAgICAgICAgICAgcmVhY3QoKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGFrc2kgPT0gJzUnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlwZSA9ICdTQUQnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFjdCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBha3NpID09ICc2JzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXBlID0gJ0FOR1JZJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWN0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgYWtzaSA9PSAnMCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfYm90KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5Y1x4OTZdIFx4MWJbMTs5N20nICsgYWtzaSArICcgXHgxYlsxOzkxbVRpZGFrIGFkYScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhY3RfcGlsaWgoKQoKCmRlZiByZWFjdCgpOgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICB0cnk6CiAgICAgICAgdG9rZXQgPSBvcGVuKCdsb2dpbi50eHQnLCAncicpLnJlYWQoKQogICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gVG9rZW4gdGlkYWsgZGl0ZW11a2FuJwogICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGxvZ2luKCkKICAgIGVsc2U6CiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgcHJpbnQgbG9nbwogICAgICAgIHByaW50IDQwICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgaWRlID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1JRCBUYXJnZXQgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcpCiAgICAgICAgbGltaXQgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bIV0gXHgxYlsxOzkybUxpbWl0IFx4MWJbMTs5MW06XHgxYlsxOzk3bSAnKQogICAgICAgIHRyeToKICAgICAgICAgICAgb2ggPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyBpZGUgKyAnP2ZpZWxkcz1mZWVkLmxpbWl0KCcgKyBsaW1pdCArICcpJmFjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgICAgIGFoID0ganNvbi5sb2FkcyhvaC50ZXh0KQogICAgICAgICAgICBqYWxhbignXHgxYlsxOzkxbVtceGUyXHg5Y1x4YmFdIFx4MWJbMTs5Mm1UdW5nZ3Ugc2ViZW50YXIgXHgxYlsxOzk3bS4uLicpCiAgICAgICAgICAgIHByaW50IDQwICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgICAgIGZvciBhIGluIGFoWydmZWVkJ11bJ2RhdGEnXToKICAgICAgICAgICAgICAgIHkgPSBhWydpZCddCiAgICAgICAgICAgICAgICByZWFrc2kuYXBwZW5kKHkpCiAgICAgICAgICAgICAgICByZXF1ZXN0cy5wb3N0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgeSArICcvcmVhY3Rpb25zP3R5cGU9JyArIHRpcGUgKyAnJmFjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtceDFiWzE7OTdtJyArIHlbOjEwXS5yZXBsYWNlKCdcbicsICcgJykgKyAnLi4uIFx4MWJbMTs5Mm1dIFx4MWJbMTs5N20nICsgdGlwZQoKICAgICAgICAgICAgcHJpbnQKICAgICAgICAgICAgcHJpbnQgJ1xyXHgxYlsxOzkxbVsrXVx4MWJbMTs5N20gU2VsZXNhaSBceDFiWzE7OTZtJyArIHN0cihsZW4ocmVha3NpKSkKICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21LZW1iYWxpIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgbWVudV9ib3QoKQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gSUQgVGlkYWsgZGl0ZW11a2FuJwogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBtZW51X2JvdCgpCgoKZGVmIGdydXBfcmVhY3QoKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRva2VuIHRpZGFrIGRpdGVtdWthbicKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dpbigpCgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgcHJpbnQgJ1x4MWJbMTszNzs0MG0xLiBceDFiWzE7OTdtTGlrZScKICAgIHByaW50ICdceDFiWzE7Mzc7NDBtMi4gXHgxYlsxOzk3bUxvdmUnCiAgICBwcmludCAnXHgxYlsxOzM3OzQwbTMuIFx4MWJbMTs5N21Xb3cnCiAgICBwcmludCAnXHgxYlsxOzM3OzQwbTQuIFx4MWJbMTs5N21IYWhhJwogICAgcHJpbnQgJ1x4MWJbMTszNzs0MG01LiBceDFiWzE7OTdtU2VkaWgnCiAgICBwcmludCAnXHgxYlsxOzM3OzQwbTYuIFx4MWJbMTs5N21NYXJhaCcKICAgIHByaW50ICdceDFiWzE7MzE7NDBtMC4gS2VtYmFsaScKICAgIHByaW50CiAgICByZWFjdGdfcGlsaWgoKQoKCmRlZiByZWFjdGdfcGlsaWgoKToKICAgIGdsb2JhbCB0aXBlCiAgICBha3NpID0gcmF3X2lucHV0KCdceDFiWzE7OTFtLVx4ZTJceDk2XHhiYVx4MWJbMTs5N20gJykKICAgIGlmIGFrc2kgPT0gJyc6CiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gSmFuZ2FuIGtvc29uZycKICAgICAgICByZWFjdGdfcGlsaWgoKQogICAgZWxzZToKICAgICAgICBpZiBha3NpID09ICcxJzoKICAgICAgICAgICAgdGlwZSA9ICdMSUtFJwogICAgICAgICAgICByZWFjdGcoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIGFrc2kgPT0gJzInOgogICAgICAgICAgICAgICAgdGlwZSA9ICdMT1ZFJwogICAgICAgICAgICAgICAgcmVhY3RnKCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmIGFrc2kgPT0gJzMnOgogICAgICAgICAgICAgICAgICAgIHRpcGUgPSAnV09XJwogICAgICAgICAgICAgICAgICAgIHJlYWN0ZygpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGlmIGFrc2kgPT0gJzQnOgogICAgICAgICAgICAgICAgICAgICAgICB0aXBlID0gJ0hBSEEnCiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWN0ZygpCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgaWYgYWtzaSA9PSAnNSc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXBlID0gJ1NBRCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWN0ZygpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBha3NpID09ICc2JzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXBlID0gJ0FOR1JZJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWN0ZygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGFrc2kgPT0gJzAnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51X2JvdCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHhlMlx4OWNceDk2XSBceDFiWzE7OTdtJyArIGFrc2kgKyAnIFx4MWJbMTs5MW1UaWRhayBhZGEnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWN0Z19waWxpaCgpCgoKZGVmIHJlYWN0ZygpOgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICB0cnk6CiAgICAgICAgdG9rZXQgPSBvcGVuKCdsb2dpbi50eHQnLCAncicpLnJlYWQoKQogICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gVG9rZW4gdGlkYWsgZGl0ZW11a2FuJwogICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGxvZ2luKCkKICAgIGVsc2U6CiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgcHJpbnQgbG9nbwogICAgICAgIHByaW50IDQwICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgaWRlID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1JRCBHcnVwIFx4MWJbMTs5MW06XHgxYlsxOzk3bSAnKQogICAgICAgIGxpbWl0ID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWyFdIFx4MWJbMTs5Mm1MaW1pdCBceDFiWzE7OTFtOlx4MWJbMTs5N20gJykKICAgICAgICBhaCA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vZ3JvdXAvP2lkPScgKyBpZGUgKyAnJmFjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgYXN3ID0ganNvbi5sb2FkcyhhaC50ZXh0KQogICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4MWJbMTs5Nm1ceGUyXHg5Y1x4OTNceDFiWzE7OTFtXSBceDFiWzE7OTJtTmFtYSBncnVwIFx4MWJbMTs5MW06XHgxYlsxOzk3bSAnICsgYXN3WyduYW1lJ10KICAgICAgICB0cnk6CiAgICAgICAgICAgIG9oID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS92My4wLycgKyBpZGUgKyAnP2ZpZWxkcz1mZWVkLmxpbWl0KCcgKyBsaW1pdCArICcpJmFjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgICAgIGFoID0ganNvbi5sb2FkcyhvaC50ZXh0KQogICAgICAgICAgICBqYWxhbignXHgxYlsxOzkxbVtceGUyXHg5Y1x4YmFdIFx4MWJbMTs5Mm1UdW5nZ3Ugc2ViZW50YXIgXHgxYlsxOzk3bS4uLicpCiAgICAgICAgICAgIHByaW50IDQwICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgICAgIGZvciBhIGluIGFoWydmZWVkJ11bJ2RhdGEnXToKICAgICAgICAgICAgICAgIHkgPSBhWydpZCddCiAgICAgICAgICAgICAgICByZWFrc2lncnVwLmFwcGVuZCh5KQogICAgICAgICAgICAgICAgcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIHkgKyAnL3JlYWN0aW9ucz90eXBlPScgKyB0aXBlICsgJyZhY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bXHgxYlsxOzk3bScgKyB5WzoxMF0ucmVwbGFjZSgnXG4nLCAnICcpICsgJy4uLiBceDFiWzE7OTJtXSBceDFiWzE7OTdtJyArIHRpcGUKCiAgICAgICAgICAgIHByaW50CiAgICAgICAgICAgIHByaW50ICdcclx4MWJbMTs5MW1bK11ceDFiWzE7OTdtIFNlbGVzYWkgXHgxYlsxOzk2bScgKyBzdHIobGVuKHJlYWtzaWdydXApKQogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBtZW51X2JvdCgpCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBJRCBUaWRhayBkaXRlbXVrYW4nCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIG1lbnVfYm90KCkKCgpkZWYgYm90X2tvbWVuKCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUb2tlbiB0aWRhayBkaXRlbXVrYW4nCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9naW4oKQogICAgZWxzZToKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgNDAgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICBwcmludCAiXHgxYlsxOzkxbVshXSBceDFiWzE7OTJtR3VuYWthbiBceDFiWzE7OTdtJzw+JyBceDFiWzE7OTJtVW50dWsgQmFyaXMgQmFydSIKICAgICAgICBpZGUgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybUlEIFRhcmdldCBceDFiWzE7OTFtOlx4MWJbMTs5N20gJykKICAgICAgICBrbSA9IHJhd19pbnB1dCgnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtS29tZW50YXIgIFx4MWJbMTs5MW06XHgxYlsxOzk3bSAnKQogICAgICAgIGxpbWl0ID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWyFdIFx4MWJbMTs5Mm1MaW1pdCBceDFiWzE7OTFtOlx4MWJbMTs5N20gJykKICAgICAgICBrbSA9IGttLnJlcGxhY2UoJzw+JywgJ1xuJykKICAgICAgICB0cnk6CiAgICAgICAgICAgIHAgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyBpZGUgKyAnP2ZpZWxkcz1mZWVkLmxpbWl0KCcgKyBsaW1pdCArICcpJmFjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgICAgIGEgPSBqc29uLmxvYWRzKHAudGV4dCkKICAgICAgICAgICAgamFsYW4oJ1x4MWJbMTs5MW1bXHhlMlx4OWNceGJhXSBceDFiWzE7OTJtVHVuZ2d1IHNlYmVudGFyIFx4MWJbMTs5N20uLi4nKQogICAgICAgICAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICBmb3IgcyBpbiBhWydmZWVkJ11bJ2RhdGEnXToKICAgICAgICAgICAgICAgIGYgPSBzWydpZCddCiAgICAgICAgICAgICAgICBrb21lbi5hcHBlbmQoZikKICAgICAgICAgICAgICAgIHJlcXVlc3RzLnBvc3QoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyBmICsgJy9jb21tZW50cz9tZXNzYWdlPScgKyBrbSArICcmYWNjZXNzX3Rva2VuPScgKyB0b2tldCkKICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW1x4MWJbMTs5N20nICsga21bOjEwXS5yZXBsYWNlKCdcbicsICcgJykgKyAnLi4uIFx4MWJbMTs5Mm1dJwoKICAgICAgICAgICAgcHJpbnQKICAgICAgICAgICAgcHJpbnQgJ1xyXHgxYlsxOzkxbVsrXVx4MWJbMTs5N20gU2VsZXNhaSBceDFiWzE7OTZtJyArIHN0cihsZW4oa29tZW4pKQogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBtZW51X2JvdCgpCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBJRCBUaWRhayBkaXRlbXVrYW4nCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIG1lbnVfYm90KCkKCgpkZWYgZ3J1cF9rb21lbigpOgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICB0cnk6CiAgICAgICAgdG9rZXQgPSBvcGVuKCdsb2dpbi50eHQnLCAncicpLnJlYWQoKQogICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gVG9rZW4gdGlkYWsgZGl0ZW11a2FuJwogICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGxvZ2luKCkKICAgIGVsc2U6CiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgcHJpbnQgbG9nbwogICAgICAgIHByaW50IDQwICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgcHJpbnQgIlx4MWJbMTs5MW1bIV0gXHgxYlsxOzkybUd1bmFrYW4gXHgxYlsxOzk3bSc8PicgXHgxYlsxOzkybVVudHVrIEJhcmlzIEJhcnUiCiAgICAgICAgaWRlID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1JRCBHcnVwICBceDFiWzE7OTFtOlx4MWJbMTs5N20gJykKICAgICAgICBrbSA9IHJhd19pbnB1dCgnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtS29tZW50YXIgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcpCiAgICAgICAgbGltaXQgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bIV0gXHgxYlsxOzkybUxpbWl0IFx4MWJbMTs5MW06XHgxYlsxOzk3bSAnKQogICAgICAgIGttID0ga20ucmVwbGFjZSgnPD4nLCAnXG4nKQogICAgICAgIHRyeToKICAgICAgICAgICAgYWggPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL2dyb3VwLz9pZD0nICsgaWRlICsgJyZhY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgICAgICAgICBhc3cgPSBqc29uLmxvYWRzKGFoLnRleHQpCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4MWJbMTs5Nm1ceGUyXHg5Y1x4OTNceDFiWzE7OTFtXSBceDFiWzE7OTJtTmFtYSBncnVwIFx4MWJbMTs5MW06XHgxYlsxOzk3bSAnICsgYXN3WyduYW1lJ10KICAgICAgICAgICAgcCA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vdjMuMC8nICsgaWRlICsgJz9maWVsZHM9ZmVlZC5saW1pdCgnICsgbGltaXQgKyAnKSZhY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgICAgICAgICBhID0ganNvbi5sb2FkcyhwLnRleHQpCiAgICAgICAgICAgIGphbGFuKCdceDFiWzE7OTFtW1x4ZTJceDljXHhiYV0gXHgxYlsxOzkybVR1bmdndSBzZWJlbnRhciBceDFiWzE7OTdtLi4uJykKICAgICAgICAgICAgcHJpbnQgNDAgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICAgICAgZm9yIHMgaW4gYVsnZmVlZCddWydkYXRhJ106CiAgICAgICAgICAgICAgICBmID0gc1snaWQnXQogICAgICAgICAgICAgICAga29tZW5ncnVwLmFwcGVuZChmKQogICAgICAgICAgICAgICAgcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGYgKyAnL2NvbW1lbnRzP21lc3NhZ2U9JyArIGttICsgJyZhY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bXHgxYlsxOzk3bScgKyBrbVs6MTBdLnJlcGxhY2UoJ1xuJywgJyAnKSArICcuLi4gXHgxYlsxOzkybV0nCgogICAgICAgICAgICBwcmludAogICAgICAgICAgICBwcmludCAnXHJceDFiWzE7OTFtWytdXHgxYlsxOzk3bSBTZWxlc2FpIFx4MWJbMTs5Nm0nICsgc3RyKGxlbihrb21lbmdydXApKQogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBtZW51X2JvdCgpCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBJRCBUaWRhayBkaXRlbXVrYW4nCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIG1lbnVfYm90KCkKCgpkZWYgZGVsZXRlcG9zdCgpOgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICB0cnk6CiAgICAgICAgdG9rZXQgPSBvcGVuKCdsb2dpbi50eHQnLCAncicpLnJlYWQoKQogICAgICAgIG5hbSA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWU/YWNjZXNzX3Rva2VuPScgKyB0b2tldCkKICAgICAgICBsb2wgPSBqc29uLmxvYWRzKG5hbS50ZXh0KQogICAgICAgIG5hbWEgPSBsb2xbJ25hbWUnXQogICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gVG9rZW4gdGlkYWsgZGl0ZW11a2FuJwogICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGxvZ2luKCkKCiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHByaW50IGxvZ28KICAgIHByaW50IDQwICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICBwcmludCAnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtRnJvbSBceDFiWzE7OTFtOiBceDFiWzE7OTdtJXMnICUgbmFtYQogICAgamFsYW4oJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybU11bGFpIG1lbmdoYXB1cyBwb3N0aW5nYW4gdW5mYWVkYWhceDFiWzE7OTdtIC4uLicpCiAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgYXN1ID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZS9mZWVkP2FjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICBhc3VzID0ganNvbi5sb2Fkcyhhc3UudGV4dCkKICAgIGZvciBwIGluIGFzdXNbJ2RhdGEnXToKICAgICAgICBpZCA9IHBbJ2lkJ10KICAgICAgICBwaXJvID0gMAogICAgICAgIHVybCA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkICsgJz9tZXRob2Q9ZGVsZXRlJmFjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgb2sgPSBqc29uLmxvYWRzKHVybC50ZXh0KQogICAgICAgIHRyeToKICAgICAgICAgICAgZXJyb3IgPSBva1snZXJyb3InXVsnbWVzc2FnZSddCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4MWJbMTs5N20nICsgaWRbOjEwXS5yZXBsYWNlKCdcbicsICcgJykgKyAnLi4uJyArICdceDFiWzE7OTFtXSBceDFiWzE7OTVtR2FnYWwnCiAgICAgICAgZXhjZXB0IFR5cGVFcnJvcjoKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bXHgxYlsxOzk3bScgKyBpZFs6MTBdLnJlcGxhY2UoJ1xuJywgJyAnKSArICcuLi4nICsgJ1x4MWJbMTs5Mm1dIFx4MWJbMTs5Nm1UZXJoYXB1cycKICAgICAgICAgICAgcGlybyArPSAxCiAgICAgICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBLb25la3NpIEVycm9yJwogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBtZW51X2JvdCgpCgogICAgcHJpbnQgJ1xuXHgxYlsxOzkxbVsrXSBceDFiWzE7OTdtU2VsZXNhaScKICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICBtZW51X2JvdCgpCgoKZGVmIGFjY2VwdCgpOgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICB0cnk6CiAgICAgICAgdG9rZXQgPSBvcGVuKCdsb2dpbi50eHQnLCAncicpLnJlYWQoKQogICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gVG9rZW4gdGlkYWsgZGl0ZW11a2FuJwogICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGxvZ2luKCkKCiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHByaW50IGxvZ28KICAgIHByaW50IDQwICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICBsaW1pdCA9IHJhd19pbnB1dCgnXHgxYlsxOzkxbVshXSBceDFiWzE7OTJtTGltaXQgXHgxYlsxOzkxbTpceDFiWzE7OTdtICcpCiAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZS9mcmllbmRyZXF1ZXN0cz9saW1pdD0nICsgbGltaXQgKyAnJmFjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICB0ZW1hbiA9IGpzb24ubG9hZHMoci50ZXh0KQogICAgaWYgJ1tdJyBpbiBzdHIodGVtYW5bJ2RhdGEnXSk6CiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gVGlkYWsgYWRhIHBlcm1pbnRhYW4gcGVydGVtYW5hbicKICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgIG1lbnVfYm90KCkKICAgIGphbGFuKCdceDFiWzE7OTFtW1x4ZTJceDljXHhiYV0gXHgxYlsxOzkybVR1bmdndSBzZWJlbnRhciBceDFiWzE7OTdtLi4uJykKICAgIHByaW50IDQwICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICBmb3IgaSBpbiB0ZW1hblsnZGF0YSddOgogICAgICAgIGdhcyA9IHJlcXVlc3RzLnBvc3QoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lL2ZyaWVuZHMvJyArIGlbJ2Zyb20nXVsnaWQnXSArICc/YWNjZXNzX3Rva2VuPScgKyB0b2tldCkKICAgICAgICBhID0ganNvbi5sb2FkcyhnYXMudGV4dCkKICAgICAgICBpZiAnZXJyb3InIGluIHN0cihhKToKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybU5hbWEgIFx4MWJbMTs5MW06XHgxYlsxOzk3bSAnICsgaVsnZnJvbSddWyduYW1lJ10KICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybUlEICAgIFx4MWJbMTs5MW06XHgxYlsxOzk3bSAnICsgaVsnZnJvbSddWydpZCddICsgJ1x4MWJbMTs5MW0gR2FnYWwnCiAgICAgICAgICAgIHByaW50IDQwICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybU5hbWEgIFx4MWJbMTs5MW06XHgxYlsxOzk3bSAnICsgaVsnZnJvbSddWyduYW1lJ10KICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybUlEICAgIFx4MWJbMTs5MW06XHgxYlsxOzk3bSAnICsgaVsnZnJvbSddWydpZCddICsgJ1x4MWJbMTs5Mm0gQmVyaGFzaWwnCiAgICAgICAgICAgIHByaW50IDQwICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCgogICAgcHJpbnQgJ1xuXHgxYlsxOzkxbVsrXSBceDFiWzE7OTdtU2VsZXNhaScKICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICBtZW51X2JvdCgpCgoKZGVmIHVuZnJpZW5kKCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUb2tlbiB0aWRhayBkaXRlbXVrYW4nCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9naW4oKQogICAgZWxzZToKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgNDAgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICBqYWxhbignXHgxYlsxOzkxbVtceGUyXHg5Y1x4YmFdIFx4MWJbMTs5Mm1UdW5nZ3Ugc2ViZW50YXIgXHgxYlsxOzk3bS4uLicpCiAgICAgICAgcHJpbnQgNDAgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICBwcmludCAnXHgxYlsxOzk3bVN0b3AgXHgxYlsxOzkxbUNUUkwrQycKICAgICAgICBwcmludAogICAgICAgIHRyeToKICAgICAgICAgICAgcGVrID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZS9mcmllbmRzP2FjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgICAgIGNvayA9IGpzb24ubG9hZHMocGVrLnRleHQpCiAgICAgICAgICAgIGZvciBpIGluIGNva1snZGF0YSddOgogICAgICAgICAgICAgICAgbmFtYSA9IGlbJ25hbWUnXQogICAgICAgICAgICAgICAgaWQgPSBpWydpZCddCiAgICAgICAgICAgICAgICByZXF1ZXN0cy5kZWxldGUoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lL2ZyaWVuZHM/dWlkPScgKyBpZCArICcmYWNjZXNzX3Rva2VuPScgKyB0b2tldCkKICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTdtW1x4MWJbMTs5Mm1UZXJoYXB1c1x4MWJbMTs5N21dICcgKyBuYW1hICsgJyA9PiAnICsgaWQKCiAgICAgICAgZXhjZXB0IEluZGV4RXJyb3I6CiAgICAgICAgICAgIHBhc3MKICAgICAgICBleGNlcHQgS2V5Ym9hcmRJbnRlcnJ1cHQ6CiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRlcmhlbnRpJwogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBtZW51X2JvdCgpCgogICAgcHJpbnQgJ1xuXHgxYlsxOzkxbVsrXSBceDFiWzE7OTdtU2VsZXNhaScKICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICBtZW51X2JvdCgpCgoKZGVmIGxhaW4oKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRva2VuIHRpZGFrIGRpdGVtdWthbicKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dpbigpCgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgcHJpbnQgJ1x4MWJbMTszNzs0MG0xLiBCdWF0IHBvc3RpbmdhbicKICAgIHByaW50ICdceDFiWzE7Mzc7NDBtMi4gQnVhdCBXb3JkbGlzdCcKICAgIHByaW50ICdceDFiWzE7Mzc7NDBtMy4gQWt1biBDaGVja2VyJwogICAgcHJpbnQgJ1x4MWJbMTszNzs0MG00LiBMaWhhdCBkYWZ0YXIgZ3J1cCcKICAgIHByaW50ICdceDFiWzE7Mzc7NDBtNS4gUHJvZmlsZSBHdWFyZCcKICAgIHByaW50CiAgICBwcmludCAnXHgxYlsxOzk3bSAgLT5Db21pbmcgc29vbjwtJwogICAgcHJpbnQKICAgIHByaW50ICdceDFiWzE7MzE7NDBtMC4gS2VtYmFsaScKICAgIHByaW50CiAgICBwaWxpaF9sYWluKCkKCgpkZWYgcGlsaWhfbGFpbigpOgogICAgb3RoZXIgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW0tXHhlMlx4OTZceGJhXHgxYlsxOzk3bSAnKQogICAgaWYgb3RoZXIgPT0gJyc6CiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gSmFuZ2FuIGtvc29uZycKICAgICAgICBwaWxpaF9sYWluKCkKICAgIGVsc2U6CiAgICAgICAgaWYgb3RoZXIgPT0gJzEnOgogICAgICAgICAgICBzdGF0dXMoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIG90aGVyID09ICcyJzoKICAgICAgICAgICAgICAgIHdvcmRsaXN0KCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmIG90aGVyID09ICczJzoKICAgICAgICAgICAgICAgICAgICBjaGVja19ha3VuKCkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgaWYgb3RoZXIgPT0gJzQnOgogICAgICAgICAgICAgICAgICAgICAgICBncnVwc2F5YSgpCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgaWYgb3RoZXIgPT0gJzUnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3VhcmQoKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgb3RoZXIgPT0gJzAnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceGUyXHg5Y1x4OTZdIFx4MWJbMTs5N20nICsgb3RoZXIgKyAnIFx4MWJbMTs5MW1UaWRhayBhZGEnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGlsaWhfbGFpbigpCgoKZGVmIHN0YXR1cygpOgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICB0cnk6CiAgICAgICAgdG9rZXQgPSBvcGVuKCdsb2dpbi50eHQnLCAncicpLnJlYWQoKQogICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bIV0gVG9rZW4gdGlkYWsgZGl0ZW11a2FuJwogICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgIGxvZ2luKCkKCiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHByaW50IGxvZ28KICAgIHByaW50IDQwICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICBtc2cgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybUtldGlrIHN0YXR1cyBceDFiWzE7OTFtOlx4MWJbMTs5N20gJykKICAgIGlmIG1zZyA9PSAnJzoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBKYW5nYW4ga29zb25nJwogICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgbGFpbigpCiAgICBlbHNlOgogICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWUvZmVlZD9tZXRob2Q9UE9TVCZtZXNzYWdlPScgKyBtc2cgKyAnJmFjY2Vzc190b2tlbj0nICsgdG9rZXQpCiAgICAgICAgb3AgPSBqc29uLmxvYWRzKHJlcy50ZXh0KQogICAgICAgIGphbGFuKCdceDFiWzE7OTFtW1x4ZTJceDljXHhiYV0gXHgxYlsxOzkybVR1bmdndSBzZWJlbnRhciBceDFiWzE7OTdtLi4uJykKICAgICAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgIHByaW50ICdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1TdGF0dXMgSURceDFiWzE7OTFtIDogXHgxYlsxOzk3bScgKyBvcFsnaWQnXQogICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgbGFpbigpCgoKZGVmIHdvcmRsaXN0KCk6CiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVshXSBUb2tlbiB0aWRhayBkaXRlbXVrYW4nCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgbG9naW4oKQogICAgZWxzZToKICAgICAgICB0cnk6CiAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgICAgICBwcmludCBsb2dvCiAgICAgICAgICAgIHByaW50IDQwICogJ1x4MWJbMTs5N21ceGUyXHg5NVx4OTAnCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWz9dIFx4MWJbMTs5Mm1Jc2kgZGF0YSBsZW5na2FwIHRhcmdldCBkaWJhd2FoJwogICAgICAgICAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICBhID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1OYW1hIERlcGFuIFx4MWJbMTs5N206ICcpCiAgICAgICAgICAgIGZpbGUgPSBvcGVuKGEgKyAnLnR4dCcsICd3JykKICAgICAgICAgICAgYiA9IHJhd19pbnB1dCgnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtTmFtYSBUZW5nYWggXHgxYlsxOzk3bTogJykKICAgICAgICAgICAgYyA9IHJhd19pbnB1dCgnXHgxYlsxOzkxbVsrXSBceDFiWzE7OTJtTmFtYSBCZWxha2FuZyBceDFiWzE7OTdtOiAnKQogICAgICAgICAgICBkID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1OYW1hIFBhbmdnaWxhbiBceDFiWzE7OTdtOiAnKQogICAgICAgICAgICBlID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1UYW5nZ2FsIExhaGlyID5ceDFiWzE7OTZtZXg6IHxERE1NWVl8IFx4MWJbMTs5N206ICcpCiAgICAgICAgICAgIGYgPSBlWzA6Ml0KICAgICAgICAgICAgZyA9IGVbMjo0XQogICAgICAgICAgICBoID0gZVs0Ol0KICAgICAgICAgICAgcHJpbnQgNDAgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bP10gXHgxYlsxOzkzbUthbG8gSm9tYmxvIFNLSVAgYWphIDp2JwogICAgICAgICAgICBpID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1OYW1hIFBhY2FyIFx4MWJbMTs5N206ICcpCiAgICAgICAgICAgIGogPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybU5hbWEgUGFuZ2dpbGFuIFBhY2FyIFx4MWJbMTs5N206ICcpCiAgICAgICAgICAgIGsgPSByYXdfaW5wdXQoJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybVRhbmdnYWwgTGFoaXIgUGFjYXIgPlx4MWJbMTs5Nm1leDogfERETU1ZWXwgXHgxYlsxOzk3bTogJykKICAgICAgICAgICAgamFsYW4oJ1x4MWJbMTs5MW1bXHhlMlx4OWNceGJhXSBceDFiWzE7OTJtVHVuZ2d1IHNlYmVudGFyIFx4MWJbMTs5N20uLi4nKQogICAgICAgICAgICBsID0ga1swOjJdCiAgICAgICAgICAgIG0gPSBrWzI6NF0KICAgICAgICAgICAgbiA9IGtbNDpdCiAgICAgICAgICAgIGZpbGUud3JpdGUoJyVzJXNcbiVzJXMlcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzJXNcbiVzJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlcyVzXG4lcyVzJXNcbiVzJXMlc1xuJXMlcyVzXG4lcyVzJXNcbiVzJXMlc1xuJXMlcyVzXG4lcyVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXMnICUgKGEsIGMsIGEsIGIsIGIsIGEsIGIsIGMsIGMsIGEsIGMsIGIsIGEsIGEsIGIsIGIsIGMsIGMsIGEsIGQsIGIsIGQsIGMsIGQsIGQsIGQsIGQsIGEsIGQsIGIsIGQsIGMsIGEsIGUsIGEsIGYsIGEsIGcsIGEsIGgsIGIsIGUsIGIsIGYsIGIsIGcsIGIsIGgsIGMsIGUsIGMsIGYsIGMsIGcsIGMsIGgsIGQsIGUsIGQsIGYsIGQsIGcsIGQsIGgsIGUsIGEsIGYsIGEsIGcsIGEsIGgsIGEsIGUsIGIsIGYsIGIsIGcsIGIsIGgsIGIsIGUsIGMsIGYsIGMsIGcsIGMsIGgsIGMsIGUsIGQsIGYsIGQsIGcsIGQsIGgsIGQsIGQsIGQsIGEsIGYsIGcsIGEsIGcsIGgsIGYsIGcsIGYsIGgsIGYsIGYsIGcsIGYsIGcsIGgsIGcsIGcsIGgsIGYsIGgsIGcsIGgsIGgsIGgsIGcsIGYsIGEsIGcsIGgsIGIsIGYsIGcsIGIsIGcsIGgsIGMsIGYsIGcsIGMsIGcsIGgsIGQsIGYsIGcsIGQsIGcsIGgsIGEsIGksIGEsIGosIGEsIGssIGksIGUsIGksIGosIGksIGssIGIsIGksIGIsIGosIGIsIGssIGMsIGksIGMsIGosIGMsIGssIGUsIGssIGosIGEsIGosIGIsIGosIGMsIGosIGQsIGosIGosIGssIGEsIGssIGIsIGssIGMsIGssIGQsIGssIGssIGksIGwsIGksIG0sIGksIG4sIGosIGwsIGosIG0sIGosIG4sIGosIGspKQogICAgICAgICAgICB3ZyA9IDAKICAgICAgICAgICAgd2hpbGUgd2cgPCAxMDA6CiAgICAgICAgICAgICAgICB3ZyA9IHdnICsgMQogICAgICAgICAgICAgICAgZmlsZS53cml0ZShhICsgc3RyKHdnKSArICdcbicpCgogICAgICAgICAgICBlbiA9IDAKICAgICAgICAgICAgd2hpbGUgZW4gPCAxMDA6CiAgICAgICAgICAgICAgICBlbiA9IGVuICsgMQogICAgICAgICAgICAgICAgZmlsZS53cml0ZShpICsgc3RyKGVuKSArICdcbicpCgogICAgICAgICAgICB3b3JkID0gMAogICAgICAgICAgICB3aGlsZSB3b3JkIDwgMTAwOgogICAgICAgICAgICAgICAgd29yZCA9IHdvcmQgKyAxCiAgICAgICAgICAgICAgICBmaWxlLndyaXRlKGQgKyBzdHIod29yZCkgKyAnXG4nKQoKICAgICAgICAgICAgZ2VuID0gMAogICAgICAgICAgICB3aGlsZSBnZW4gPCAxMDA6CiAgICAgICAgICAgICAgICBnZW4gPSBnZW4gKyAxCiAgICAgICAgICAgICAgICBmaWxlLndyaXRlKGogKyBzdHIoZ2VuKSArICdcbicpCgogICAgICAgICAgICBmaWxlLmNsb3NlKCkKICAgICAgICAgICAgdGltZS5zbGVlcCgxLjUpCiAgICAgICAgICAgIHByaW50ICdcblx4MWJbMTs5MW1bK10gXHgxYlsxOzk3bVRlcnNpbXBhbiBceDFiWzE7OTFtOiBceDFiWzE7OTdtICVzLnR4dCcgJSBhCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGxhaW4oKQogICAgICAgIGV4Y2VwdCBJT0Vycm9yIGFzIGU6CiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIEdhZ2FsIG1lbWJ1YXQgZmlsZScKICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21LZW1iYWxpIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgbGFpbigpCgoKZGVmIGNoZWNrX2FrdW4oKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRva2VuIHRpZGFrIGRpdGVtdWthbicKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dpbigpCiAgICBlbHNlOgogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgIHByaW50IGxvZ28KICAgICAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgIHByaW50ICdceDFiWzE7OTFtWz9dIFx4MWJbMTs5Mm1Jc2kgRmlsZVx4MWJbMTs5MW0gOiBceDFiWzE7OTdtdXNlcm5hbWV8cGFzc3dvcmQnCiAgICAgICAgcHJpbnQgNDAgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICBsaXZlID0gW10KICAgICAgICBjZWsgPSBbXQogICAgICAgIGRpZSA9IFtdCiAgICAgICAgdHJ5OgogICAgICAgICAgICBmaWxlID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1GaWxlIFx4MWJbMTs5MW06XHgxYlsxOzk3bSAnKQogICAgICAgICAgICBsaXN0ID0gb3BlbihmaWxlLCAncicpLnJlYWRsaW5lcygpCiAgICAgICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIEZpbGUgdGlkYWsgZGl0ZW11a2FuJwogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBsYWluKCkKCiAgICBwZW1pc2FoID0gcmF3X2lucHV0KCdceDFiWzE7OTFtWytdIFx4MWJbMTs5Mm1QZW1pc2FoIFx4MWJbMTs5MW06XHgxYlsxOzk3bSAnKQogICAgamFsYW4oJ1x4MWJbMTs5MW1bXHhlMlx4OWNceGJhXSBceDFiWzE7OTJtVHVuZ2d1IHNlYmVudGFyIFx4MWJbMTs5N20uLi4nKQogICAgcHJpbnQgNDAgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgIGZvciBtZWtpIGluIGxpc3Q6CiAgICAgICAgdXNlcm5hbWUsIHBhc3N3b3JkID0gbWVraS5zdHJpcCgpLnNwbGl0KHN0cihwZW1pc2FoKSkKICAgICAgICB1cmwgPSAnaHR0cHM6Ly9iLWFwaS5mYWNlYm9vay5jb20vbWV0aG9kL2F1dGgubG9naW4/YWNjZXNzX3Rva2VuPTIzNzc1OTkwOTU5MTY1NSUyNTI1N0MwZjE0MGFhYmVkZmI2NWFjMjdhNzM5ZWQxYTIyNjNiMSZmb3JtYXQ9anNvbiZzZGtfdmVyc2lvbj0yJmVtYWlsPScgKyB1c2VybmFtZSArICcmbG9jYWxlPWVuX1VTJnBhc3N3b3JkPScgKyBwYXNzd29yZCArICcmc2RrPWlvcyZnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXM9MSZzaWc9M2Y1NTVmOTlmYjYxZmNkN2FhMGM0NGY1OGY1MjJlZjYnCiAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCh1cmwpCiAgICAgICAgbXBzaCA9IGpzb24ubG9hZHMoZGF0YS50ZXh0KQogICAgICAgIGlmICdhY2Nlc3NfdG9rZW4nIGluIG1wc2g6CiAgICAgICAgICAgIGxpdmUuYXBwZW5kKHBhc3N3b3JkKQogICAgICAgICAgICBwcmludCAnXHgxYlsxOzk3bVtceDFiWzE7OTJtTGl2ZVx4MWJbMTs5N21dICBceDFiWzE7OTdtJyArIHVzZXJuYW1lICsgJyB8ICcgKyBwYXNzd29yZAogICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIG1wc2hbJ2Vycm9yX21zZyddOgogICAgICAgICAgICBjZWsuYXBwZW5kKHBhc3N3b3JkKQogICAgICAgICAgICBwcmludCAnXHgxYlsxOzk3bVtceDFiWzE7OTNtQ2hlY2tceDFiWzE7OTdtXSBceDFiWzE7OTdtJyArIHVzZXJuYW1lICsgJyB8ICcgKyBwYXNzd29yZAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGRpZS5hcHBlbmQocGFzc3dvcmQpCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTdtW1x4MWJbMTs5MW1NYXRpXHgxYlsxOzk3bV0gIFx4MWJbMTs5N20nICsgdXNlcm5hbWUgKyAnIHwgJyArIHBhc3N3b3JkCgogICAgcHJpbnQgJ1xuXHgxYlsxOzkxbVsrXSBceDFiWzE7OTdtVG90YWxceDFiWzE7OTFtIDogXHgxYlsxOzk3bUxpdmU9XHgxYlsxOzkybScgKyBzdHIobGVuKGxpdmUpKSArICcgXHgxYlsxOzk3bUNoZWNrPVx4MWJbMTs5M20nICsgc3RyKGxlbihjZWspKSArICcgXHgxYlsxOzk3bURpZT1ceDFiWzE7OTFtJyArIHN0cihsZW4oZGllKSkKICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICBsYWluKCkKCgpkZWYgZ3J1cHNheWEoKToKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRva2VuIHRpZGFrIGRpdGVtdWthbicKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dpbigpCiAgICBlbHNlOgogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgIHByaW50IGxvZ28KICAgICAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgIGphbGFuKCdceDFiWzE7OTFtW1x4ZTJceDljXHhiYV0gXHgxYlsxOzkybVR1bmdndSBzZWJlbnRhciBceDFiWzE7OTdtLi4uJykKICAgICAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgIHRyeToKICAgICAgICAgICAgdWggPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lL2dyb3Vwcz9hY2Nlc3NfdG9rZW49JyArIHRva2V0KQogICAgICAgICAgICBndWQgPSBqc29uLmxvYWRzKHVoLnRleHQpCiAgICAgICAgICAgIGZvciBwIGluIGd1ZFsnZGF0YSddOgogICAgICAgICAgICAgICAgbmFtYSA9IHBbJ25hbWUnXQogICAgICAgICAgICAgICAgaWQgPSBwWydpZCddCiAgICAgICAgICAgICAgICBmID0gb3BlbignZ3J1cGlkLnR4dCcsICd3JykKICAgICAgICAgICAgICAgIGxpc3RncnVwLmFwcGVuZChpZCkKICAgICAgICAgICAgICAgIGYud3JpdGUoaWQgKyAnXG4nKQogICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bXHgxYlsxOzk2bVx4ZTJceDljXHg5M1x4MWJbMTs5MW1dIFx4MWJbMTs5Mm1OYW1hICBceDFiWzE7OTFtOlx4MWJbMTs5N20gJyArIHN0cihuYW1hKQogICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5MW1bK10gXHgxYlsxOzkybUlEICAgIFx4MWJbMTs5MW06XHgxYlsxOzk3bSAnICsgc3RyKGlkKQogICAgICAgICAgICAgICAgcHJpbnQgNDAgKiAnXHgxYlsxOzk3bT0nCgogICAgICAgICAgICBwcmludCAnXG5cclx4MWJbMTs5MW1bK10gXHgxYlsxOzk3bUp1bWxhaCBHcnVwIFx4MWJbMTs5Nm0lcycgJSBsZW4obGlzdGdydXApCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWytdIFx4MWJbMTs5N21UZXJzaW1wYW4gXHgxYlsxOzkxbTogXHgxYlsxOzk3bWdydXBpZC50eHQnCiAgICAgICAgICAgIGYuY2xvc2UoKQogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBsYWluKCkKICAgICAgICBleGNlcHQgKEtleWJvYXJkSW50ZXJydXB0LCBFT0ZFcnJvcik6CiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRlcmhlbnRpJwogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBsYWluKCkKICAgICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgICAgIG9zLnJlbW92ZSgnZ3J1cGlkLnR4dCcpCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIEdydXAgdGlkYWsgZGl0ZW11a2FuJwogICAgICAgICAgICByYXdfaW5wdXQoJ1xuXHgxYlsxOzkxbVsgXHgxYlsxOzk3bUtlbWJhbGkgXHgxYlsxOzkxbV0nKQogICAgICAgICAgICBsYWluKCkKICAgICAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6CiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtW1x4ZTJceDljXHg5Nl0gVGlkYWsgYWRhIGtvbmVrc2knCiAgICAgICAgICAgIGtlbHVhcigpCiAgICAgICAgZXhjZXB0IElPRXJyb3I6CiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIEtlc2FsYWhhbiBzYWF0IG1lbWJ1YXQgZmlsZScKICAgICAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21LZW1iYWxpIFx4MWJbMTs5MW1dJykKICAgICAgICAgICAgbGFpbigpCgoKZGVmIGd1YXJkKCk6CiAgICBnbG9iYWwgdG9rZXQKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgdHJ5OgogICAgICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywgJ3InKS5yZWFkKCkKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIFRva2VuIHRpZGFrIGRpdGVtdWthbicKICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICBsb2dpbigpCgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICBwcmludCBsb2dvCiAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgcHJpbnQgJ1x4MWJbMTszNzs0MG0xLiBBa3RpZmthbicKICAgIHByaW50ICdceDFiWzE7Mzc7NDBtMi4gTm9uQWt0aWZrYW4nCiAgICBwcmludCAnXHgxYlsxOzMxOzQwbTAuIEtlbWJhbGknCiAgICBwcmludAogICAgZyA9IHJhd19pbnB1dCgnXHgxYlsxOzkxbS1ceGUyXHg5Nlx4YmFceDFiWzE7OTdtICcpCiAgICBpZiBnID09ICcxJzoKICAgICAgICBha3RpZiA9ICd0cnVlJwogICAgICAgIGdheih0b2tldCwgYWt0aWYpCiAgICBlbHNlOgogICAgICAgIGlmIGcgPT0gJzInOgogICAgICAgICAgICBub24gPSAnZmFsc2UnCiAgICAgICAgICAgIGdheih0b2tldCwgbm9uKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIGcgPT0gJzAnOgogICAgICAgICAgICAgICAgbGFpbigpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpZiBnID09ICcnOgogICAgICAgICAgICAgICAgICAgIGtlbHVhcigpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGtlbHVhcigpCgoKZGVmIGdldF91c2VyaWQodG9rZXQpOgogICAgdXJsID0gJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lP2FjY2Vzc190b2tlbj0lcycgJSB0b2tldAogICAgcmVzID0gcmVxdWVzdHMuZ2V0KHVybCkKICAgIHVpZCA9IGpzb24ubG9hZHMocmVzLnRleHQpCiAgICByZXR1cm4gdWlkWydpZCddCgoKZGVmIGdheih0b2tldCwgZW5hYmxlPVRydWUpOgogICAgaWQgPSBnZXRfdXNlcmlkKHRva2V0KQogICAgZGF0YSA9ICd2YXJpYWJsZXM9eyIwIjp7ImlzX3NoaWVsZGVkIjogJXMsInNlc3Npb25faWQiOiI5Yjc4MTkxYy04NGZkLTRhYjYtYjBhYS0xOWIzOWYwNGE2YmMiLCJhY3Rvcl9pZCI6IiVzIiwiY2xpZW50X211dGF0aW9uX2lkIjoiYjAzMTZkZDYtM2ZkNi00YmViLWFlZDQtYmIyOWM1ZGM2NGIwIn19Jm1ldGhvZD1wb3N0JmRvY19pZD0xNDc3MDQzMjkyMzY3MTgzJnF1ZXJ5X25hbWU9SXNTaGllbGRlZFNldE11dGF0aW9uJnN0cmlwX2RlZmF1bHRzPXRydWUmc3RyaXBfbnVsbHM9dHJ1ZSZsb2NhbGU9ZW5fVVMmY2xpZW50X2NvdW50cnlfY29kZT1VUyZmYl9hcGlfcmVxX2ZyaWVuZGx5X25hbWU9SXNTaGllbGRlZFNldE11dGF0aW9uJmZiX2FwaV9jYWxsZXJfY2xhc3M9SXNTaGllbGRlZFNldE11dGF0aW9uJyAlIChlbmFibGUsIHN0cihpZCkpCiAgICBoZWFkZXJzID0geydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJywgJ0F1dGhvcml6YXRpb24nOiAnT0F1dGggJXMnICUgdG9rZXR9CiAgICB1cmwgPSAnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vZ3JhcGhxbCcKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsLCBkYXRhPWRhdGEsIGhlYWRlcnM9aGVhZGVycykKICAgIHByaW50IHJlcy50ZXh0CiAgICBpZiAnImlzX3NoaWVsZGVkIjp0cnVlJyBpbiByZXMudGV4dDoKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBwcmludCBsb2dvCiAgICAgICAgcHJpbnQgNDAgKiAnXHgxYlsxOzk3bVx4ZTJceDk1XHg5MCcKICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceDFiWzE7OTZtXHhlMlx4OWNceDkzXHgxYlsxOzkxbV0gXHgxYlsxOzkybURpYWt0aWZrYW4nCiAgICAgICAgcmF3X2lucHV0KCdcblx4MWJbMTs5MW1bIFx4MWJbMTs5N21LZW1iYWxpIFx4MWJbMTs5MW1dJykKICAgICAgICBsYWluKCkKICAgIGVsc2U6CiAgICAgICAgaWYgJyJpc19zaGllbGRlZCI6ZmFsc2UnIGluIHJlcy50ZXh0OgogICAgICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICAgICAgcHJpbnQgbG9nbwogICAgICAgICAgICBwcmludCA0MCAqICdceDFiWzE7OTdtXHhlMlx4OTVceDkwJwogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkxbVtceDFiWzE7OTZtXHhlMlx4OWNceDkzXHgxYlsxOzkxbV0gXHgxYlsxOzkxbURpbm9uYWt0aWZrYW4nCiAgICAgICAgICAgIHJhd19pbnB1dCgnXG5ceDFiWzE7OTFtWyBceDFiWzE7OTdtS2VtYmFsaSBceDFiWzE7OTFtXScpCiAgICAgICAgICAgIGxhaW4oKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTFtWyFdIEVycm9yJwogICAgICAgICAgICBrZWx1YXIoKQoKCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6Cglsb2dpbigpCiMgb2theSBkZWNvbXBpbGluZyAzLnB5Ywo='))